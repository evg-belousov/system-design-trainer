import type { Question } from '../types';

export const cdnQuestions: Question[] = [
  {
    id: 'sd-cdn-001',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Что такое CDN (Content Delivery Network)?',
    options: [
      'Протокол шифрования трафика между клиентом и сервером',
      'Географически распределённая сеть серверов для доставки контента пользователям из ближайшей точки',
      'Система управления базами данных для хранения мультимедиа',
      'Инструмент мониторинга производительности веб-приложений',
    ],
    correctIndex: 1,
    explanation:
      'CDN (Content Delivery Network) -- это сеть географически распределённых серверов (edge-серверов, PoP -- Points of Presence), которые кэшируют и доставляют контент пользователям из ближайшей к ним точки. Это уменьшает задержку (latency), так как данные проходят меньшее расстояние, разгружает основной сервер (origin) и повышает доступность контента. CDN особенно эффективна для статического контента: изображений, видео, CSS, JavaScript, файлов для скачивания.',
  },
  {
    id: 'sd-cdn-002',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'middle',
    type: 'open',
    question: 'Объясните разницу между Push CDN и Pull CDN. Когда лучше использовать каждый вариант?',
    sampleAnswer:
      'Pull CDN: edge-серверы загружают контент с origin-сервера по запросу пользователя (lazy loading). При первом запросе происходит cache miss -- контент загружается с origin, кэшируется на edge и отдаётся пользователю. Последующие запросы обслуживаются из кэша до истечения TTL. Преимущества: простая настройка, контент кэшируется только при наличии спроса, экономия хранилища на edge. Подходит для сайтов с большим объёмом контента, где не весь контент одинаково популярен. Push CDN: контент заранее загружается на edge-серверы администратором или CI/CD-пайплайном. Преимущества: нет cold start (первый запрос так же быстр, как последующие), полный контроль над версиями контента. Подходит для статических файлов, которые известны заранее (сборки фронтенда, видео), и для сайтов с небольшим, но стабильным набором контента.',
    explanation:
      'На практике большинство CDN-провайдеров (CloudFlare, AWS CloudFront, Akamai) работают по pull-модели как основной, но предоставляют API для предварительной загрузки (prefetch/warm) контента, что по сути является push-операцией. Часто используется гибридный подход: Pull CDN с предзагрузкой критически важного контента.',
  },
  {
    id: 'sd-cdn-003',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'senior',
    type: 'open',
    question: 'Как CDN обрабатывает динамический контент? Какие техники используются для ускорения доставки динамических данных через CDN?',
    sampleAnswer:
      'Хотя CDN традиционно ассоциируется со статическим контентом, современные CDN активно работают с динамическим контентом через: 1) Edge Computing: выполнение серверной логики на edge-серверах (Cloudflare Workers, AWS Lambda@Edge). Позволяет генерировать персонализированный контент ближе к пользователю. 2) Dynamic Site Acceleration (DSA): оптимизация маршрутов между edge и origin через приватную сеть CDN-провайдера (в отличие от публичного интернета), persistent connections, TCP-оптимизации. 3) Edge Side Includes (ESI): разделение страницы на статические и динамические фрагменты, кэширование статических частей на edge. 4) Stale-while-revalidate: возврат устаревшего кэша при асинхронном обновлении. 5) Micro-caching: кэширование динамического контента на очень короткий TTL (1-5 секунд) для сглаживания пиков.',
    explanation:
      'Тренд в индустрии -- перемещение вычислений ближе к пользователю (edge computing). Cloudflare Workers, Deno Deploy, Vercel Edge Functions -- все они используют инфраструктуру CDN для запуска серверного кода на edge. Это размывает границу между CDN и Application Server, создавая новые архитектурные паттерны для систем с глобальной аудиторией.',
  },
  {
    id: 'sd-cdn-004',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Что такое cache invalidation в контексте CDN и почему это сложная задача?',
    options: [
      'Это автоматическое удаление всех файлов с edge-серверов каждые 24 часа',
      'Это процесс удаления или обновления устаревшего контента на edge-серверах, сложный из-за распределённости и задержки распространения',
      'Это механизм шифрования кэшированного контента для защиты от атак',
      'Это процедура проверки целостности файлов на edge-серверах',
    ],
    correctIndex: 1,
    explanation:
      'Cache invalidation -- это процесс удаления или обновления устаревшего контента на edge-серверах CDN. Это одна из «двух самых сложных задач в Computer Science» (по известной цитате Фила Карлтона). Сложность в том, что CDN может иметь сотни edge-серверов по всему миру, и инвалидация должна дойти до каждого из них. Это занимает время (от секунд до минут), в течение которого разные пользователи могут получать разные версии контента. Подходы: TTL-based expiry, purge API, версионирование файлов (cache busting через хэш в имени файла, например style.abc123.css).',
  },
  {
    id: 'sd-cdn-005',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Что такое PoP (Point of Presence) в контексте CDN?',
    options: [
      'Протокол передачи данных между клиентом и CDN',
      'Физическая точка присутствия CDN -- дата-центр с edge-серверами, расположенный ближе к конечным пользователям',
      'Специальный формат сжатия файлов для ускорения загрузки',
      'Механизм аутентификации пользователей на CDN',
    ],
    correctIndex: 1,
    explanation:
      'PoP (Point of Presence) -- это физическая точка присутствия CDN-провайдера, представляющая собой дата-центр или серверную стойку в определённом географическом регионе. Каждый PoP содержит edge-серверы, которые кэшируют контент и обслуживают запросы пользователей из ближайшей локации. Крупные CDN-провайдеры, такие как Cloudflare и Akamai, имеют сотни PoP по всему миру. Чем больше PoP, тем ближе контент к пользователям и тем ниже задержка.',
  },
  {
    id: 'sd-cdn-006',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Какой HTTP-заголовок используется для определения, был ли ответ обслужен из кэша CDN?',
    options: [
      'Content-Type',
      'X-Cache (со значениями HIT или MISS)',
      'Authorization',
      'Accept-Encoding',
    ],
    correctIndex: 1,
    explanation:
      'Заголовок X-Cache (или аналогичные: X-Cache-Status, CF-Cache-Status у Cloudflare) используется CDN-провайдерами для информирования о статусе кэша. Значение HIT означает, что ответ был обслужен из кэша edge-сервера, MISS -- что запрос был передан на origin-сервер. Это крайне полезно для отладки и мониторинга эффективности CDN. Также используются значения EXPIRED (кэш истёк), STALE (отдан устаревший кэш) и BYPASS (кэширование обойдено).',
  },
  {
    id: 'sd-cdn-007',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Какой тип контента лучше всего подходит для доставки через CDN?',
    options: [
      'Только текстовые файлы',
      'Статический контент: изображения, CSS, JavaScript, видео, шрифты',
      'Только данные из базы данных',
      'Только API-запросы с аутентификацией',
    ],
    correctIndex: 1,
    explanation:
      'CDN наиболее эффективна для доставки статического контента, который не изменяется для разных пользователей: изображения, CSS-файлы, JavaScript-бандлы, видео, шрифты, PDF-документы. Такой контент легко кэшируется на edge-серверах и может обслуживать множество пользователей без обращения к origin-серверу. Хотя современные CDN поддерживают и динамический контент (через edge computing, ESI), именно статический контент обеспечивает максимальный выигрыш от использования CDN.',
  },
  {
    id: 'sd-cdn-008',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Что такое Origin Shield в архитектуре CDN?',
    options: [
      'Файрвол, защищающий origin-сервер от DDoS-атак',
      'Промежуточный кэширующий слой между edge-серверами и origin-сервером, уменьшающий нагрузку на origin',
      'Система мониторинга доступности origin-сервера',
      'Механизм шифрования данных на origin-сервере',
    ],
    correctIndex: 1,
    explanation:
      'Origin Shield -- это дополнительный кэширующий слой (mid-tier cache) между edge-серверами и origin-сервером. Без Origin Shield при cache miss каждый PoP обращается напрямую к origin, что может создать большую нагрузку, особенно при массовой инвалидации кэша. С Origin Shield все edge-серверы обращаются к одному или нескольким shield-серверам, которые кэшируют контент и снижают количество запросов к origin. Это особенно важно для сценариев с низким cache hit ratio или при «thundering herd» проблеме.',
  },
  {
    id: 'sd-cdn-009',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Какую проблему решает стратегия multi-CDN?',
    options: [
      'Снижение стоимости хостинга за счёт использования бесплатных CDN',
      'Повышение надёжности, производительности и отказоустойчивости за счёт одновременного использования нескольких CDN-провайдеров',
      'Автоматическая генерация контента на edge-серверах',
      'Шифрование трафика между разными CDN-провайдерами',
    ],
    correctIndex: 1,
    explanation:
      'Multi-CDN -- это стратегия использования нескольких CDN-провайдеров одновременно. Преимущества: 1) Отказоустойчивость -- при проблемах у одного провайдера трафик переключается на другой. 2) Оптимизация производительности -- DNS-балансировка направляет пользователя к провайдеру с лучшей производительностью в его регионе. 3) Переговорная позиция -- конкуренция между провайдерами за цену. 4) Географический охват -- разные CDN могут быть сильнее в разных регионах. Реализация обычно через DNS-балансировку (Cedexis/Citrix ITM, NS1) или через CDN-агрегаторы.',
  },
  {
    id: 'sd-cdn-010',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'middle',
    type: 'open',
    question: 'Какие стратегии инвалидации кэша CDN существуют? Сравните их преимущества и недостатки.',
    sampleAnswer:
      '1) TTL-based (Time to Live): контент автоматически считается устаревшим после истечения TTL. Плюсы: простота, нет активных действий. Минусы: пользователи могут видеть устаревший контент до истечения TTL. 2) Purge API: ручная или автоматическая отправка запроса на удаление конкретного URL из кэша всех edge-серверов. Плюсы: точечная инвалидация. Минусы: распространение занимает время, API-вызовы стоят денег у некоторых провайдеров. 3) Cache busting (версионирование URL): добавление хэша или версии в имя файла (style.abc123.css). Плюсы: мгновенная инвалидация, старый и новый контент сосуществуют, нет проблем с распространением. Минусы: требует изменения ссылок в HTML/коде. 4) Stale-while-revalidate: отдаётся устаревший кэш, а обновление происходит асинхронно. Плюсы: пользователь не ждёт, минимальная задержка. Минусы: кратковременное отображение старого контента. 5) Surrogate keys (теги): пометка связанных ресурсов тегами и массовая инвалидация по тегу. Плюсы: удобно для связанного контента. Минусы: поддерживается не всеми CDN.',
    explanation:
      'На практике часто комбинируются несколько подходов: cache busting для статических ассетов (CSS, JS), TTL + stale-while-revalidate для API-ответов, purge API для критических обновлений контента. Выбор стратегии зависит от требований к актуальности данных и допустимого времени рассинхронизации.',
  },
  {
    id: 'sd-cdn-011',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'senior',
    type: 'open',
    question: 'Как CDN используется для защиты от DDoS-атак? Какие механизмы безопасности предоставляют современные CDN?',
    sampleAnswer:
      'CDN обеспечивает несколько уровней защиты от DDoS и других атак: 1) Поглощение объёмных атак (volumetric DDoS): распределённая сеть CDN с огромной суммарной пропускной способностью (у Cloudflare -- более 100 Тбит/с) может поглотить атаку, которая вывела бы из строя отдельный origin-сервер. 2) WAF (Web Application Firewall): фильтрация вредоносных запросов (SQL injection, XSS, CSRF) на edge-уровне до достижения origin. Правила могут быть предустановленными (OWASP Core Rule Set) и кастомными. 3) Rate limiting на edge: ограничение количества запросов с одного IP/подсети. 4) Bot management: идентификация и блокировка ботов через JavaScript-челленджи, CAPTCHA, анализ поведения. 5) IP-репутация и геоблокировка: блокировка запросов из подозрительных IP-диапазонов или регионов. 6) Anycast-маршрутизация: автоматическое распределение атакующего трафика между множеством PoP, не давая сконцентрировать атаку на одной точке. 7) SSL/TLS-терминация на edge: защита от SSL-атак без нагрузки на origin.',
    explanation:
      'Cloudflare, AWS Shield, Akamai Prolexic -- примеры CDN-сервисов с встроенной DDoS-защитой. Преимущество CDN-подхода в том, что защита работает на уровне сети, максимально близко к источнику атаки, и не требует масштабирования origin-инфраструктуры. Для критически важных приложений рекомендуется комбинировать CDN-защиту с дополнительными мерами: ограничение доступа к origin по IP, использование Private Network Connection.',
  },
  {
    id: 'sd-cdn-012',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'senior',
    type: 'quiz',
    question: 'Что такое Edge Computing в контексте CDN и какое его основное преимущество?',
    options: [
      'Хранение пользовательских данных на edge-серверах вместо центральной базы данных',
      'Выполнение серверной логики (кода) на edge-серверах CDN, ближе к пользователю, для снижения задержки',
      'Использование мобильных устройств пользователей для распределённых вычислений',
      'Автоматическое масштабирование origin-сервера при высокой нагрузке',
    ],
    correctIndex: 1,
    explanation:
      'Edge Computing в контексте CDN -- это выполнение серверного кода непосредственно на edge-серверах CDN-провайдера. Примеры платформ: Cloudflare Workers (использует V8 isolates), AWS Lambda@Edge, Vercel Edge Functions, Deno Deploy. Преимущество: код выполняется в PoP, ближайшем к пользователю, что значительно снижает задержку по сравнению с обращением к централизованному origin-серверу. Типичные сценарии: A/B тестирование, персонализация контента, аутентификация, геомаршрутизация, трансформация изображений, API-прокси с кэшированием.',
  },
  {
    id: 'sd-cdn-013',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'senior',
    type: 'open',
    question: 'Как CDN используется для стриминга видео? Опишите архитектуру доставки видео через CDN.',
    sampleAnswer:
      'CDN играет ключевую роль в доставке видео-контента. Архитектура включает: 1) Подготовка контента: видео транскодируется в несколько вариантов качества (битрейт, разрешение) и нарезается на короткие сегменты (2-10 сек). Используются адаптивные протоколы: HLS (HTTP Live Streaming) от Apple и DASH (Dynamic Adaptive Streaming over HTTP). 2) Хранение: сегменты и манифесты (m3u8 для HLS, mpd для DASH) хранятся на origin-сервере (часто S3 или аналог). 3) Доставка через CDN: edge-серверы кэшируют сегменты видео. При адаптивном стриминге клиент запрашивает сегменты нужного качества в зависимости от текущей пропускной способности сети. 4) Live streaming: для live-контента используется Low Latency HLS/DASH, где сегменты публикуются на CDN в реальном времени. Origin Shield критически важен для live, чтобы не перегрузить origin. 5) DRM (Digital Rights Management): CDN обрабатывает зашифрованные сегменты, а ключи расшифровки доставляются через отдельный защищённый канал.',
    explanation:
      'Netflix, YouTube, Twitch -- все используют CDN для доставки видео. Netflix построил собственную CDN (Open Connect), размещая серверы непосредственно у интернет-провайдеров. YouTube использует глобальную сеть Google. Для live-стриминга задержка является критическим параметром, и современные протоколы (LL-HLS, LL-DASH, WebRTC) стремятся к задержке менее 3 секунд.',
  },
  {
    id: 'sd-cdn-014',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Что произойдёт, если CDN не имеет запрошенного файла в кэше edge-сервера?',
    options: [
      'CDN вернёт ошибку 404 пользователю',
      'CDN запросит файл у origin-сервера, закэширует его и отдаст пользователю',
      'CDN перенаправит пользователя напрямую на origin-сервер',
      'CDN автоматически сгенерирует заглушку вместо файла',
    ],
    correctIndex: 1,
    explanation:
      'Когда edge-сервер CDN не имеет запрошенного файла в кэше (cache miss), он выполняет запрос к origin-серверу, получает файл, сохраняет его в локальном кэше и отдаёт пользователю. Последующие запросы того же файла от пользователей, обслуживаемых этим же PoP, будут отданы из кэша (cache hit) без обращения к origin. Это базовый принцип работы Pull CDN. Первый пользователь испытает бо́льшую задержку (cold start), но все последующие получат контент быстрее.',
  },
  {
    id: 'sd-cdn-015',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Что такое Anycast в контексте CDN и какую проблему он решает?',
    options: [
      'Протокол для передачи видео в реальном времени',
      'Метод маршрутизации, при котором один IP-адрес привязан к нескольким серверам, и запрос направляется к ближайшему',
      'Метод шифрования данных при передаче между edge-серверами',
      'Алгоритм балансировки нагрузки внутри одного дата-центра',
    ],
    correctIndex: 1,
    explanation:
      'Anycast -- это метод сетевой маршрутизации, при котором один и тот же IP-адрес объявляется (анонсируется через BGP) множеством серверов в разных географических локациях. Когда пользователь отправляет запрос на этот IP, сетевая инфраструктура автоматически направляет его к ближайшему серверу (по метрикам маршрутизации). В CDN Anycast используется для автоматического направления пользователей к ближайшему PoP без необходимости DNS-балансировки. Также Anycast эффективно распределяет DDoS-трафик по множеству точек.',
  },
  {
    id: 'sd-cdn-016',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'senior',
    type: 'quiz',
    question: 'Что такое Edge Side Includes (ESI) и какую задачу они решают?',
    options: [
      'Протокол для шифрования контента на edge-серверах',
      'Язык разметки, позволяющий разделить страницу на фрагменты с разным кэшированием -- статические части кэшируются, динамические запрашиваются отдельно',
      'Инструмент для мониторинга производительности edge-серверов',
      'Формат сжатия для уменьшения размера HTML-страниц',
    ],
    correctIndex: 1,
    explanation:
      'Edge Side Includes (ESI) -- это язык разметки (стандарт W3C), который позволяет разделить веб-страницу на фрагменты с разными политиками кэширования. Например, шаблон страницы и навигация кэшируются на длительный TTL, а персонализированный блок (корзина, приветствие пользователя) подгружается отдельно с коротким TTL или без кэширования. Edge-сервер CDN собирает финальную страницу из фрагментов. Это позволяет кэшировать большую часть страницы и при этом доставлять персонализированный контент. Поддерживается Akamai, Varnish, Fastly.',
  },
  {
    id: 'sd-cdn-017',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'senior',
    type: 'open',
    question: 'Что такое «thundering herd» проблема в CDN и как её решить?',
    sampleAnswer:
      'Thundering herd (проблема громоподобного стада) в CDN возникает, когда TTL популярного объекта истекает одновременно на edge-сервере, и множество пользователей одновременно запрашивают этот объект. Все запросы приводят к cache miss и одновременно уходят на origin-сервер, создавая пиковую нагрузку, которая может вывести его из строя. Решения: 1) Request collapsing (coalescing): edge-сервер объединяет несколько одновременных cache miss запросов к одному URL в один запрос к origin. Остальные клиенты ждут результат первого запроса. 2) Stale-while-revalidate: отдавать устаревший кэш пользователям, пока один фоновый запрос обновляет кэш на origin. 3) Probabilistic early expiration: кэш считается истёкшим случайно раньше TTL для небольшого процента запросов, предотвращая массовое истечение. 4) Origin Shield: дополнительный кэширующий слой, который принимает на себя поток запросов от множества edge-серверов. 5) Soft purge (Fastly): пометка объекта как stale вместо полного удаления, позволяя отдавать его при обновлении.',
    explanation:
      'Thundering herd -- одна из самых коварных проблем CDN, которая проявляется именно при высокой нагрузке. Она может каскадно усиливаться: origin не справляется, таймауты увеличиваются, edge начинает отправлять ещё больше запросов. На практике комбинация request collapsing + stale-while-revalidate + Origin Shield эффективно решает эту проблему.',
  },
  {
    id: 'sd-cdn-018',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'junior',
    type: 'open',
    question: 'Какую роль играет заголовок Cache-Control в работе CDN? Приведите примеры основных директив.',
    sampleAnswer:
      'Заголовок Cache-Control указывает CDN и браузерам, как кэшировать ответ. Основные директивы: 1) max-age=3600 -- ресурс можно кэшировать на 3600 секунд (1 час). 2) s-maxage=86400 -- TTL для промежуточных кэшей (CDN), имеет приоритет над max-age для CDN. 3) public -- ресурс может кэшироваться любым кэшем (CDN, браузер). 4) private -- ресурс кэшируется только в браузере пользователя, CDN не должна его кэшировать (для персонализированных данных). 5) no-cache -- ресурс можно хранить в кэше, но перед использованием нужно проверить актуальность у сервера (revalidation). 6) no-store -- ресурс нельзя кэшировать нигде (для конфиденциальных данных). 7) stale-while-revalidate=60 -- можно отдавать устаревший кэш в течение 60 секунд, пока фоново обновляется.',
    explanation:
      'Правильная настройка Cache-Control -- ключ к эффективной работе CDN. Типичная стратегия: для статических ассетов с хэшем в имени (style.abc123.css) -- max-age=31536000 (1 год), для HTML-страниц -- no-cache или короткий max-age + stale-while-revalidate, для API-ответов -- private или s-maxage с коротким TTL.',
  },
  {
    id: 'sd-cdn-019',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'senior',
    type: 'quiz',
    question: 'Какой подход к маршрутизации пользователей к ближайшему PoP CDN является наиболее точным?',
    options: [
      'Маршрутизация на основе IP-адреса клиента с использованием GeoIP-базы',
      'Маршрутизация через DNS с использованием EDNS Client Subnet (ECS) для определения реальной подсети клиента',
      'Случайная маршрутизация между доступными PoP',
      'Маршрутизация на основе User-Agent браузера',
    ],
    correctIndex: 1,
    explanation:
      'EDNS Client Subnet (ECS) -- расширение протокола DNS, при котором DNS-резолвер передаёт подсеть клиента авторитетному DNS-серверу CDN. Это позволяет CDN направить пользователя к PoP, ближайшему к его реальному местоположению, а не к местоположению DNS-резолвера. Без ECS пользователь из Москвы, использующий Google DNS (8.8.8.8, расположен в США), мог быть направлен на американский PoP. Anycast решает эту проблему на сетевом уровне, а ECS -- на уровне DNS. Комбинация обоих подходов даёт наилучший результат.',
  },
  {
    id: 'sd-cdn-020',
    block: 'sd',
    topic: 'cdn',
    topicLabel: 'CDN',
    difficulty: 'middle',
    type: 'open',
    question: 'Объясните, как CDN обрабатывает HTTPS-трафик. Что такое SSL/TLS-терминация на edge?',
    sampleAnswer:
      'CDN обрабатывает HTTPS-трафик следующим образом: 1) SSL/TLS-терминация на edge: edge-сервер CDN расшифровывает HTTPS-запрос от клиента, что означает, что SSL/TLS-соединение завершается на edge-сервере, а не на origin. Для этого CDN хранит SSL-сертификат и приватный ключ на edge-серверах. 2) Связь с origin: между edge и origin может использоваться отдельное HTTPS-соединение (full SSL), HTTP-соединение (flexible SSL) или strict SSL с валидацией сертификата origin. 3) Преимущества терминации на edge: снижение нагрузки на origin (SSL-хэндшейк ресурсоёмкий), возможность кэширования расшифрованного контента на edge, использование более быстрого протокола между edge и origin. 4) Варианты сертификатов: выделенный (dedicated) сертификат клиента, SAN/SNI сертификат (общий для нескольких доменов), бесплатные сертификаты Let\'s Encrypt (у Cloudflare -- Universal SSL). 5) Keyless SSL: Cloudflare предлагает вариант, где приватный ключ хранится на инфраструктуре клиента, а CDN выполняет операции SSL без доступа к ключу.',
    explanation:
      'SSL/TLS-терминация на edge -- стандартная практика для CDN. Однако она вызывает вопросы безопасности: приватный ключ должен быть распределён по всем edge-серверам. Решения: HSM (Hardware Security Modules) на edge, Keyless SSL (Cloudflare), регулярная ротация ключей. Для максимальной безопасности рекомендуется использовать full strict SSL (с валидацией сертификата origin).',
  },
];
