import type { QuizQuestion, OpenQuestion } from '../types';

export const questions: (QuizQuestion | OpenQuestion)[] = [
  {
    id: 'sa-bpmn-001',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Какой элемент BPMN 2.0 изображается в виде круга и обозначает начало процесса?',
    options: [
      'Действие (Activity)',
      'Шлюз (Gateway)',
      'Стартовое событие (Start Event)',
      'Поток управления (Sequence Flow)',
    ],
    correctIndex: 2,
    explanation:
      'Стартовое событие (Start Event) изображается в виде круга с тонкой одинарной границей и обозначает точку начала процесса. В каждом пуле должно быть хотя бы одно стартовое событие. Стартовые события могут быть различных типов: простое (None — процесс запускается вручную или произвольно), по сообщению (Message — процесс запускается при получении сообщения), по таймеру (Timer — процесс запускается в определённое время или с определённой периодичностью), условное (Conditional — процесс запускается при выполнении условия), сигнальное (Signal — процесс запускается при получении широковещательного сигнала).',
  },
  {
    id: 'sa-bpmn-002',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Что такое пул (Pool) в нотации BPMN?',
    options: [
      'Контейнер для группировки связанных задач',
      'Контейнер, представляющий участника процесса (организацию или систему)',
      'Графический элемент для обозначения хранилища данных',
      'Тип подпроцесса для параллельного выполнения',
    ],
    correctIndex: 1,
    explanation:
      'Пул (Pool) в BPMN представляет участника процесса — организацию, подразделение или систему. Пул является контейнером для процесса одного участника. Внутри пула можно создавать дорожки (Lanes) для разделения ответственности между ролями или отделами. Между пулами передаются сообщения через потоки сообщений (Message Flow), изображаемые пунктирными стрелками. Потоки управления (Sequence Flow) не могут пересекать границы пулов — это ключевое правило BPMN, обеспечивающее чёткое разделение ответственности между участниками.',
  },
  {
    id: 'sa-bpmn-003',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Какой тип шлюза BPMN обозначается ромбом с крестиком «X» внутри?',
    options: [
      'Параллельный шлюз (AND Gateway)',
      'Инклюзивный шлюз (OR Gateway)',
      'Эксклюзивный шлюз (XOR Gateway)',
      'Событийный шлюз (Event-based Gateway)',
    ],
    correctIndex: 2,
    explanation:
      'Эксклюзивный шлюз (XOR Gateway, Exclusive Gateway) обозначается ромбом с крестиком «X» внутри (или пустым ромбом). При разветвлении выбирается ровно один из исходящих потоков на основе условий. При слиянии шлюз пропускает первый пришедший токен без ожидания остальных. Параллельный шлюз (AND) обозначается знаком «+» и активирует все потоки. Инклюзивный шлюз (OR) обозначается кругом внутри ромба и активирует один или несколько потоков. Событийный шлюз обозначается пятиугольником внутри ромба и ожидает наступления одного из нескольких событий.',
  },
  {
    id: 'sa-bpmn-004',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Чем отличается поток управления (Sequence Flow) от потока сообщений (Message Flow) в BPMN?',
    options: [
      'Sequence Flow изображается пунктирной линией, а Message Flow — сплошной',
      'Sequence Flow соединяет элементы внутри одного пула, а Message Flow — элементы в разных пулах',
      'Message Flow может использоваться только между стартовым и конечным событиями',
      'Sequence Flow используется только в подпроцессах',
    ],
    correctIndex: 1,
    explanation:
      'Поток управления (Sequence Flow) — сплошная стрелка, соединяющая элементы внутри одного пула и определяющая порядок выполнения. Поток сообщений (Message Flow) — пунктирная стрелка с открытым наконечником, соединяющая элементы в разных пулах и обозначающая обмен сообщениями между участниками. Это фундаментальное правило BPMN: Sequence Flow никогда не пересекает границы пулов, а Message Flow никогда не используется внутри одного пула. Нарушение этих правил — одна из самых частых ошибок начинающих аналитиков при моделировании процессов.',
  },
  {
    id: 'sa-bpmn-005',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Какой элемент BPMN используется для обозначения работы, выполняемой человеком?',
    options: [
      'Сервисная задача (Service Task)',
      'Пользовательская задача (User Task)',
      'Скриптовая задача (Script Task)',
      'Задача отправки (Send Task)',
    ],
    correctIndex: 1,
    explanation:
      'Пользовательская задача (User Task) обозначает работу, выполняемую человеком с помощью программного обеспечения (например, заполнение формы). Изображается прямоугольником с закруглёнными углами и иконкой человека. Сервисная задача (Service Task) выполняется автоматически системой или веб-сервисом. Скриптовая задача (Script Task) выполняет скрипт на языке программирования. Задача отправки (Send Task) отправляет сообщение внешнему участнику. Правильный выбор типа задачи важен при исполняемом моделировании в BPM-движках (Camunda, Activiti).',
  },
  {
    id: 'sa-bpmn-006',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'open',
    question: 'Объясните разницу между моделями процессов «as-is» и «to-be». Зачем нужна каждая из них?',
    sampleAnswer:
      'Модель «as-is» описывает текущее состояние бизнес-процесса — как он выполняется сейчас, со всеми существующими шагами, ролями, системами и проблемами. Она создаётся путём анализа реальной работы: интервью, наблюдение, анализ документов. Модель «to-be» описывает целевое состояние процесса — как он должен выполняться после оптимизации или автоматизации. Модель as-is нужна для: понимания текущей ситуации, выявления узких мест (bottleneck), дублирования работ, ручных этапов, которые можно автоматизировать, и для определения baseline для измерения улучшений. Модель to-be нужна для: визуализации целевого состояния, согласования изменений со стейкхолдерами, оценки эффекта от изменений, формирования требований к новой системе. Типичные ошибки: пропуск as-is-анализа (оптимизация «вслепую»), моделирование «идеализированного» as-is вместо реального, отсутствие метрик для сравнения as-is и to-be.',
    explanation:
      'Анализ as-is / to-be — фундаментальная методика бизнес-анализа. Gap Analysis между моделями выявляет конкретные изменения, которые необходимо реализовать. Метрики процесса (время цикла, стоимость, количество ошибок) позволяют количественно оценить эффект оптимизации. В практике BPM это называется «Process Improvement Life Cycle».',
  },
  {
    id: 'sa-bpmn-007',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Какой тип подпроцесса в BPMN 2.0 запускает свои экземпляры для каждого элемента коллекции?',
    options: [
      'Встроенный подпроцесс (Embedded Sub-process)',
      'Вызываемый подпроцесс (Call Activity)',
      'Многоэкземплярный подпроцесс (Multi-instance Sub-process)',
      'Событийный подпроцесс (Event Sub-process)',
    ],
    correctIndex: 2,
    explanation:
      'Многоэкземплярный подпроцесс (Multi-instance Sub-process) создаёт отдельный экземпляр для каждого элемента входной коллекции. Обозначается тремя вертикальными линиями (параллельное выполнение) или тремя горизонтальными линиями (последовательное выполнение) внизу прямоугольника. Пример: обработка каждой позиции заказа, отправка уведомления каждому участнику. Встроенный подпроцесс — часть родительского процесса с собственным scope. Вызываемый подпроцесс (Call Activity) — повторно используемый процесс, определённый отдельно. Событийный подпроцесс запускается при возникновении события внутри родительского процесса.',
  },
  {
    id: 'sa-bpmn-008',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Как в BPMN моделируется обработка ошибки, возникающей в подпроцессе?',
    options: [
      'С помощью условного потока управления (Conditional Sequence Flow)',
      'С помощью промежуточного граничного события ошибки (Error Boundary Event) на подпроцессе',
      'С помощью эксклюзивного шлюза после подпроцесса',
      'С помощью аннотации (Text Annotation)',
    ],
    correctIndex: 1,
    explanation:
      'Промежуточное граничное событие ошибки (Error Boundary Event) прикрепляется к границе задачи или подпроцесса и «перехватывает» ошибку, если она возникает. Изображается кругом с двойной границей и символом молнии, расположенным на рамке задачи. При возникновении ошибки выполнение основного потока прерывается, и управление переходит по исходящему потоку из граничного события в обработчик ошибки. Существуют прерывающие (interrupting) и непрерывающие (non-interrupting) граничные события. Прерывающее событие ошибки останавливает задачу, непрерывающее — создаёт параллельный поток без остановки основного.',
  },
  {
    id: 'sa-bpmn-009',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Что такое событийный подпроцесс (Event Sub-process) в BPMN и когда он активируется?',
    options: [
      'Подпроцесс, который выполняется параллельно с основным процессом по умолчанию',
      'Подпроцесс, который запускается при наступлении определённого события (таймер, сообщение, ошибка) внутри родительского процесса',
      'Подпроцесс, который вызывается явно через Call Activity',
      'Подпроцесс, который выполняется только один раз за время жизни процесса',
    ],
    correctIndex: 1,
    explanation:
      'Событийный подпроцесс (Event Sub-process) — это подпроцесс, размещённый внутри родительского процесса или подпроцесса, который не имеет входящих и исходящих потоков управления. Он запускается только при наступлении определённого события (стартовое событие подпроцесса). Обозначается прямоугольником с пунктирной границей. Может быть прерывающим (прекращает выполнение родительского процесса) или непрерывающим (работает параллельно). Типичные сценарии: обработка ошибок на уровне всего процесса, обработка таймаута, реакция на отмену (cancellation), эскалация.',
  },
  {
    id: 'sa-bpmn-010',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Какой тип промежуточного события в BPMN используется для приостановки выполнения процесса на заданное время?',
    options: [
      'Промежуточное событие сообщения (Message Intermediate Event)',
      'Промежуточное событие таймера (Timer Intermediate Event)',
      'Промежуточное событие ссылки (Link Intermediate Event)',
      'Промежуточное условное событие (Conditional Intermediate Event)',
    ],
    correctIndex: 1,
    explanation:
      'Промежуточное событие таймера (Timer Intermediate Event) приостанавливает выполнение процесса до наступления заданного момента времени, истечения интервала или определённой периодичности. Изображается двойным кругом с символом часов. Используется для моделирования задержек, ожиданий и дедлайнов. Пример: «Подождать 3 рабочих дня после отправки запроса». Таймер может быть определён через: конкретную дату (timeDate), длительность (timeDuration) или периодичность (timeCycle) в формате ISO 8601. Событие сообщения ожидает сообщение от другого участника, условное — наступления условия.',
  },
  {
    id: 'sa-bpmn-011',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'open',
    question: 'Объясните разницу между инклюзивным (OR) и эксклюзивным (XOR) шлюзами при разветвлении и слиянии потоков. Приведите примеры из реальных бизнес-процессов.',
    sampleAnswer:
      'Эксклюзивный шлюз (XOR) при разветвлении выбирает ровно один исходящий поток — тот, условие которого истинно. При слиянии пропускает первый пришедший токен. Пример: «Сумма заказа > 100 000 руб.?» — Да: на согласование директору, Нет: автоматическое одобрение. Инклюзивный шлюз (OR) при разветвлении активирует один или несколько исходящих потоков — все, условия которых истинны. При слиянии ожидает завершения всех активированных ветвей (именно активированных, а не всех входящих). Пример: при оформлении кредита могут параллельно запускаться проверки: проверка кредитной истории (всегда), проверка залога (если сумма > 1 млн), выезд оценщика (если залог — недвижимость). Количество активных веток зависит от параметров заявки. Ключевое отличие при слиянии: XOR пропускает первый пришедший токен; OR ожидает все активированные ветви, что требует от движка отслеживания, какие ветви были активированы. Это делает OR-шлюз более сложным для исполнения.',
    explanation:
      'Инклюзивный шлюз — один из наиболее сложных элементов BPMN для корректного моделирования и исполнения. При слиянии он должен «знать», какие ветви были активированы при разветвлении, чтобы ожидать именно их. Ошибки в использовании OR-шлюза — частая причина зависших процессов в BPM-движках. Рекомендация: использовать OR-шлюз только когда это действительно необходимо, и всегда проверять корректность модели через симуляцию.',
  },
  {
    id: 'sa-bpmn-012',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'open',
    question: 'Что такое компенсация (Compensation) в BPMN? В каких сценариях она применяется и как моделируется?',
    sampleAnswer:
      'Компенсация в BPMN — механизм отмены или «отката» уже выполненной работы в случае, когда дальнейшее выполнение процесса невозможно или нежелательно. В отличие от обработки ошибок, компенсация применяется к уже успешно завершённым задачам. Моделирование: (1) На задачу, которая может быть компенсирована, прикрепляется граничное компенсационное событие (Compensation Boundary Event — кружок с символом «перемотки»). (2) От этого события идёт ассоциация (не Sequence Flow!) к компенсационной задаче, описывающей действия отката. (3) Запуск компенсации производится промежуточным компенсационным событием (Compensation Throw Event) или из обработчика ошибки. Пример: процесс бронирования путешествия — бронирование авиабилета (компенсация: отмена бронирования), бронирование отеля (компенсация: отмена брони). Если бронирование отеля не удалось, запускается компенсация для уже забронированного авиабилета. Это реализация паттерна Saga в бизнес-процессах.',
    explanation:
      'Компенсация в BPMN реализует паттерн, аналогичный Saga в микросервисах. Ключевые правила: компенсационная задача соединяется с граничным событием через ассоциацию, а не через Sequence Flow; компенсация выполняется в обратном порядке (LIFO); компенсационная задача должна быть идемпотентной. Этот механизм критически важен для моделирования длительных транзакций (Long-running Transactions), где ACID-транзакции невозможны.',
  },
  {
    id: 'sa-bpmn-013',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Какой элемент BPMN используется для моделирования бизнес-правила, выполняемого автоматически?',
    options: [
      'Пользовательская задача (User Task)',
      'Задача бизнес-правила (Business Rule Task)',
      'Ручная задача (Manual Task)',
      'Задача получения (Receive Task)',
    ],
    correctIndex: 1,
    explanation:
      'Задача бизнес-правила (Business Rule Task) обозначает автоматическое выполнение бизнес-правила через механизм правил (rule engine), например DMN (Decision Model and Notation). Изображается прямоугольником с иконкой таблицы. Это позволяет вынести бизнес-логику из кода процесса в отдельную таблицу решений, которую могут поддерживать бизнес-пользователи без участия разработчиков. Пример: определение категории риска клиента на основе набора параметров. Пользовательская задача требует участия человека. Ручная задача выполняется человеком без системы. Задача получения ожидает входящее сообщение.',
  },
  {
    id: 'sa-bpmn-014',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'quiz',
    question: 'Чем сигнальное событие (Signal Event) отличается от события сообщения (Message Event) в BPMN?',
    options: [
      'Сигнал адресован конкретному получателю, а сообщение — всем подписчикам',
      'Сигнал является широковещательным (broadcast) и принимается всеми подписчиками, а сообщение адресовано конкретному получателю',
      'Сигнал может использоваться только как стартовое событие, а сообщение — как промежуточное',
      'Между ними нет разницы, это синонимы',
    ],
    correctIndex: 1,
    explanation:
      'Сигнальное событие (Signal Event) работает по принципу широковещания (broadcast): когда сигнал отправляется, его получают ВСЕ процессы и элементы, подписанные на этот сигнал. Это аналог паттерна Publish-Subscribe. Событие сообщения (Message Event) — адресное: сообщение отправляется конкретному получателю (определённому пулу или экземпляру процесса). Это аналог паттерна Point-to-Point. Сигналы используются для координации между несвязанными процессами: например, сигнал «Курс валюты изменился» может запустить пересчёт во множестве процессов одновременно. Сообщение используется для конкретного обмена данными между участниками.',
  },
  {
    id: 'sa-bpmn-015',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'quiz',
    question: 'Какой паттерн BPMN используется для моделирования ситуации, когда процесс должен отреагировать на первое из нескольких возможных событий?',
    options: [
      'Параллельный шлюз (AND Gateway) с граничными событиями',
      'Инклюзивный шлюз (OR Gateway) с условными потоками',
      'Событийный шлюз (Event-based Gateway) с последующими промежуточными событиями',
      'Эксклюзивный шлюз (XOR Gateway) с дефолтным потоком',
    ],
    correctIndex: 2,
    explanation:
      'Событийный шлюз (Event-based Gateway) используется, когда процесс должен дождаться одного из нескольких возможных событий и отреагировать на первое наступившее. После шлюза размещаются промежуточные события-получатели (catching events): таймеры, сообщения, сигналы, условия. Срабатывает только одна ветвь — та, чьё событие произошло первым. Остальные отменяются. Пример: после отправки коммерческого предложения ожидаем либо ответ клиента (сообщение), либо истечение 7 дней (таймер). Что произойдёт первым — по той ветви и пойдёт процесс. Это принципиально отличается от XOR, где выбор основан на данных, а не на внешних событиях.',
  },
  {
    id: 'sa-bpmn-016',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'open',
    question: 'Опишите, как вы бы смоделировали в BPMN процесс оформления заказа с оркестрацией трёх сервисов (склад, оплата, доставка), включая обработку ошибок и компенсацию.',
    sampleAnswer:
      'Процесс оформления заказа с оркестрацией: Основной пул «Оркестратор заказов» содержит следующую логику: (1) Стартовое событие (сообщение) — получение заказа. (2) Сервисная задача «Резервирование товара на складе» — вызов Warehouse API. Граничное событие ошибки: если товара нет — конечное событие с сообщением клиенту об отказе. Компенсационное событие: отмена резервирования. (3) Сервисная задача «Проведение оплаты» — вызов Payment API. Граничное событие ошибки: если оплата не прошла — запуск компенсации резервирования на складе, затем уведомление клиента. Компенсационное событие: возврат средств. (4) Сервисная задача «Создание доставки» — вызов Delivery API. Граничное событие ошибки: если доставка невозможна — запуск компенсации (возврат оплаты + отмена резервирования), уведомление клиента. (5) Задача отправки «Уведомление клиента об успехе». (6) Конечное событие. На весь подпроцесс накладывается граничное событие таймера (например, 30 минут на весь процесс). При срабатывании — компенсация всех выполненных шагов. Три внешних пула (Warehouse, Payment, Delivery) с потоками сообщений от/к оркестратору. Это реализация паттерна Orchestration Saga.',
    explanation:
      'Данный сценарий демонстрирует паттерн Orchestration Saga в BPMN, где центральный оркестратор управляет последовательностью вызовов и компенсаций. Альтернатива — Choreography (без центрального координатора), моделируемая через Choreography Diagram в BPMN. Ключевые элементы модели: граничные события ошибок для каждого шага, компенсационные задачи для отката, таймаут на весь процесс, потоки сообщений к внешним сервисам.',
  },
  {
    id: 'sa-bpmn-017',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'open',
    question: 'Какие метрики процесса вы бы использовали для обоснования оптимизации бизнес-процесса? Как BPMN-модель помогает в измерении этих метрик?',
    sampleAnswer:
      'Ключевые метрики для обоснования оптимизации: (1) Cycle Time (время цикла) — общее время от начала до завершения процесса, включая ожидания. Измеряется по timestamps стартового и конечного событий в BPM-движке. (2) Processing Time (время обработки) — суммарное время активной работы, без ожиданий. Разница между Cycle Time и Processing Time показывает потенциал оптимизации. (3) Throughput (пропускная способность) — количество завершённых экземпляров за период. (4) Error Rate (доля ошибок) — процент экземпляров, завершившихся ошибкой или ушедших в компенсацию. (5) Wait Time (время ожидания) — время простоя между задачами, особенно на пользовательских задачах. (6) Cost per Instance (стоимость экземпляра) — суммарная стоимость ресурсов на один экземпляр. (7) First-Time-Right Rate — доля экземпляров, прошедших без возвратов и переделок. BPMN-модель помогает: в BPM-движках (Camunda, Activiti) каждый элемент логирует timestamps, что позволяет автоматически собирать метрики; модель визуализирует узкие места через heatmaps; симуляция BPMN-модели позволяет оценить эффект оптимизации до внедрения.',
    explanation:
      'Process Mining и BPMN-симуляция — современные подходы к анализу процессов. Process Mining автоматически строит модель процесса из логов системы (event logs), выявляя реальные пути выполнения, узкие места и отклонения от эталонной модели. BPMN-симуляция позволяет моделировать нагрузку и оценивать эффект оптимизации до её реализации. Зрелый аналитик должен уметь обосновать оптимизацию количественно через метрики.',
  },
  {
    id: 'sa-bpmn-018',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'quiz',
    question: 'Какой механизм BPMN 2.0 позволяет моделировать эскалацию задачи при нарушении SLA?',
    options: [
      'Компенсационное событие на границе задачи',
      'Непрерывающее граничное событие таймера (Non-interrupting Timer Boundary Event)',
      'Событие завершения с ошибкой (Error End Event)',
      'Параллельный шлюз после задачи',
    ],
    correctIndex: 1,
    explanation:
      'Непрерывающее граничное событие таймера (Non-interrupting Timer Boundary Event) — идеальный механизм для моделирования эскалации при нарушении SLA. Оно обозначается пунктирным кругом с символом часов на границе задачи. При срабатывании таймера (например, задача не завершена за 4 часа) создаётся параллельный поток для эскалации (уведомление руководителя, переназначение), но основная задача продолжает выполняться. Прерывающее событие (сплошная граница) отменило бы задачу, что нежелательно — мы хотим, чтобы исполнитель мог завершить работу. Компенсационное событие используется для отката завершённых задач, а не для эскалации.',
  },
  {
    id: 'sa-bpmn-019',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'quiz',
    question: 'В чём ключевое отличие Choreography Diagram от Collaboration Diagram в BPMN 2.0?',
    options: [
      'Choreography Diagram показывает только потоки данных, а Collaboration — потоки управления',
      'Choreography Diagram описывает взаимодействие между участниками без внутренних процессов каждого участника, а Collaboration Diagram показывает внутренние процессы в пулах',
      'Collaboration Diagram не поддерживает потоки сообщений',
      'Choreography Diagram используется только для UI-процессов',
    ],
    correctIndex: 1,
    explanation:
      'Choreography Diagram (диаграмма хореографии) фокусируется на взаимодействии между участниками: показывает последовательность обменов сообщениями без раскрытия внутренних процессов каждого участника. Элементы хореографии — Choreography Tasks, в которых указаны инициатор и получатель. Collaboration Diagram (диаграмма сотрудничества) показывает внутренние процессы участников внутри пулов, связанные потоками сообщений. Choreography Diagram отвечает на вопрос «в каком порядке участники обмениваются сообщениями», а Collaboration Diagram — «как каждый участник организует свою работу внутри». В микросервисной архитектуре Choreography соответствует паттерну Choreography Saga, а Collaboration — Orchestration Saga.',
  },
  {
    id: 'sa-bpmn-020',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'open',
    question: 'Перечислите и объясните основные ошибки, которые допускают аналитики при моделировании бизнес-процессов в BPMN.',
    sampleAnswer:
      'Основные ошибки при моделировании в BPMN: (1) Sequence Flow между пулами — потоки управления не могут пересекать границы пулов, между пулами используются только Message Flow. (2) Отсутствие конечного события — каждый путь процесса должен завершаться конечным событием. (3) Несбалансированные шлюзы — каждый шлюз разветвления должен иметь парный шлюз слияния того же типа (XOR→XOR, AND→AND). Несбалансированность приводит к зависшим токенам. (4) Использование OR-шлюза без необходимости — OR при слиянии сложен для исполнения, часто можно заменить на комбинацию AND и XOR. (5) «Спагетти-процесс» — слишком много элементов на одной диаграмме. Решение: декомпозиция на подпроцессы, иерархическое моделирование. (6) Смешение уровней абстракции — на одной диаграмме показаны и стратегические шаги, и технические детали. (7) Отсутствие обработки ошибок и исключений — моделируется только «happy path». (8) Неправильное использование типов задач — например, использование Abstract Task вместо User Task или Service Task. (9) Message Flow внутри одного пула — Message Flow используется только между пулами. (10) Множественные стартовые события без чёткого описания условий запуска.',
    explanation:
      'Качественная BPMN-модель должна быть синтаксически корректной (соответствовать спецификации BPMN 2.0), семантически верной (отражать реальный процесс) и прагматически полезной (понятной целевой аудитории). Инструменты валидации (Camunda Modeler, Signavio) помогают обнаружить синтаксические ошибки, но семантические и прагматические ошибки выявляются только при ревью с экспертами домена.',
  },
  {
    id: 'sa-bpmn-021',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Какой элемент BPMN используется для хранения информации, доступной в рамках процесса?',
    options: [
      'Событие (Event)',
      'Объект данных (Data Object)',
      'Шлюз (Gateway)',
      'Поток сообщений (Message Flow)',
    ],
    correctIndex: 1,
    explanation:
      'Объект данных (Data Object) в BPMN представляет информацию, используемую или создаваемую в процессе. Изображается прямоугольником с загнутым углом. Связывается с задачами через Data Association (пунктирная стрелка). Виды: Data Object (экземпляр данных), Data Input (входные данные), Data Output (выходные данные), Data Store (постоянное хранилище — база данных). Data Objects делают явными информационные потоки в процессе.',
  },
  {
    id: 'sa-bpmn-022',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Что означает круг с двойной границей в BPMN?',
    options: [
      'Стартовое событие',
      'Конечное событие',
      'Промежуточное событие (Intermediate Event)',
      'Граничное событие',
    ],
    correctIndex: 2,
    explanation:
      'Промежуточное событие (Intermediate Event) изображается кругом с двойной границей. Оно происходит между началом и концом процесса. Виды: catching (ловящие — ожидают наступления события) и throwing (бросающие — инициируют событие). Типы: таймер (ожидание времени), сообщение (отправка/получение), сигнал (broadcast), ошибка (обработка исключений), эскалация, компенсация, ссылка (link). Стартовое событие — одинарная тонкая граница. Конечное — одинарная толстая граница.',
  },
  {
    id: 'sa-bpmn-023',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Какой тип задачи в BPMN обозначает работу, выполняемую внешней системой или сервисом автоматически?',
    options: [
      'Пользовательская задача (User Task)',
      'Сервисная задача (Service Task)',
      'Ручная задача (Manual Task)',
      'Задача бизнес-правила (Business Rule Task)',
    ],
    correctIndex: 1,
    explanation:
      'Сервисная задача (Service Task) обозначает работу, выполняемую автоматически программным сервисом или системой без участия человека. Изображается прямоугольником с закруглёнными углами и иконкой шестерёнок. Примеры: вызов REST API, отправка email, запись в БД, вызов внешнего веб-сервиса. В исполняемых моделях (Camunda, Activiti) Service Task связывается с Java-классом, делегатом или внешним worker\'ом.',
  },
  {
    id: 'sa-bpmn-024',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'open',
    question: 'Объясните разницу между пулом (Pool) и дорожкой (Lane) в BPMN. Когда использовать каждый элемент?',
    sampleAnswer:
      'Пул (Pool) представляет участника процесса — отдельную организацию, систему или подразделение с собственной ответственностью. Между пулами обмен происходит только через Message Flow (пунктирные стрелки). Sequence Flow НЕ может пересекать границы пулов. Дорожка (Lane) — подразделение внутри одного пула, обычно представляет роль, отдел или систему внутри организации. Дорожки разделяют ответственность за задачи внутри одного процесса. Sequence Flow свободно пересекает границы дорожек. Когда использовать: Pool — для разных организаций/систем, которые обмениваются сообщениями (B2B интеграция, клиент и поставщик, система и внешний сервис). Lane — для ролей внутри одной организации (Менеджер, Бухгалтерия, IT-отдел), для визуализации handoff между ролями. Пример: процесс продажи — Pool «Клиент» и Pool «Компания», внутри компании — Lanes «Продавец», «Склад», «Бухгалтерия».',
    explanation:
      'Понимание различия Pool/Lane критично для корректного моделирования. Ошибка: использовать Lanes для разных организаций и соединять их Sequence Flow — это нарушение семантики BPMN и вводит в заблуждение относительно контроля над процессом.',
  },
  {
    id: 'sa-bpmn-025',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Что такое DMN (Decision Model and Notation)?',
    options: [
      'Расширение BPMN для моделирования данных',
      'Стандарт OMG для моделирования и автоматизации бизнес-решений (decision logic)',
      'Протокол обмена сообщениями между процессами',
      'Инструмент для мониторинга процессов',
    ],
    correctIndex: 1,
    explanation:
      'DMN (Decision Model and Notation) — стандарт OMG для моделирования бизнес-логики принятия решений. Ключевой элемент — Decision Table (таблица решений): входные условия → выходной результат. Также поддерживает Decision Requirements Diagram (DRD) — граф зависимостей между решениями. DMN интегрируется с BPMN через Business Rule Task. Преимущества: бизнес-пользователи могут понимать и изменять логику решений без программирования; легко тестировать; аудируемость. Применение: расчёт скидок, определение кредитного рейтинга, маршрутизация заявок.',
  },
  {
    id: 'sa-bpmn-026',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Какой паттерн BPMN используется для моделирования повторяющейся активности до выполнения условия?',
    options: [
      'Параллельный шлюз с обратной связью',
      'Цикл с постусловием (Loop Activity с loopCondition)',
      'Событийный подпроцесс',
      'Многоэкземплярная активность',
    ],
    correctIndex: 1,
    explanation:
      'Loop Activity (циклическая активность) — задача или подпроцесс с маркером цикла (стрелка по кругу), повторяющаяся пока loopCondition истинно (или пока максимум итераций не достигнут). Может быть testBefore (проверка до выполнения, как while) или testBefore=false (проверка после, как do-while). Альтернатива: явное моделирование через XOR-шлюз с обратной стрелкой. Loop Activity компактнее, но менее наглядна. Многоэкземплярная активность (Multi-Instance) — для параллельной обработки коллекции, не для повторения до условия.',
  },
  {
    id: 'sa-bpmn-027',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Что такое Process Mining?',
    options: [
      'Ручное моделирование бизнес-процессов',
      'Автоматический анализ логов информационных систем для выявления, мониторинга и улучшения реальных процессов',
      'Метод тестирования BPMN-моделей',
      'Техника интервьюирования стейкхолдеров',
    ],
    correctIndex: 1,
    explanation:
      'Process Mining — дисциплина на стыке Data Science и BPM. Анализирует event logs (логи событий) из информационных систем (ERP, CRM, workflow systems) для: Discovery — автоматического построения модели процесса «как есть» из логов; Conformance Checking — сравнения реального поведения с эталонной моделью, выявления отклонений; Enhancement — улучшения модели на основе данных (bottlenecks, rework, deviations). Инструменты: Celonis, Apromore, ProM, Disco. Process Mining объективнее интервью, так как основан на фактических данных, а не восприятии людей.',
  },
  {
    id: 'sa-bpmn-028',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'open',
    question: 'Опишите жизненный цикл управления бизнес-процессами (BPM Lifecycle). Какие фазы он включает?',
    sampleAnswer:
      'BPM Lifecycle — непрерывный цикл управления бизнес-процессами: (1) Strategy & Design (Стратегия и проектирование): выявление процессов для улучшения, определение KPI, моделирование as-is процессов, разработка to-be модели, согласование со стейкхолдерами. (2) Modeling & Documentation (Моделирование): создание детальных BPMN-моделей, документирование бизнес-правил (DMN), определение ролей и ответственности. (3) Implementation (Реализация): автоматизация процесса в BPM-движке (Camunda, Bizagi) или через разработку ПО, интеграция с системами, настройка пользовательских форм. (4) Execution (Исполнение): запуск процесса в production, обработка экземпляров процесса, взаимодействие участников. (5) Monitoring (Мониторинг): сбор метрик (cycle time, throughput, SLA), dashboard и отчёты, алерты на отклонения. (6) Optimization (Оптимизация): анализ узких мест, A/B-тестирование изменений, внедрение улучшений. Цикл повторяется — после оптимизации возвращаемся к проектированию новых улучшений. Это соответствует PDCA (Plan-Do-Check-Act) Деминга.',
    explanation:
      'BPM Lifecycle подчёркивает, что управление процессами — непрерывная деятельность, а не проект. Зрелые организации имеют выделенный BPM Center of Excellence (CoE), владеющий методологией и инструментами. Системный аналитик участвует преимущественно в фазах Design, Modeling и Optimization.',
  },
  {
    id: 'sa-bpmn-029',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Какой тип конечного события в BPMN сигнализирует об ошибке, приводящей к прерыванию процесса?',
    options: [
      'Конечное событие-сообщение (Message End Event)',
      'Конечное событие-ошибка (Error End Event)',
      'Конечное событие-отмена (Cancel End Event)',
      'Конечное событие-сигнал (Signal End Event)',
    ],
    correctIndex: 1,
    explanation:
      'Error End Event (конечное событие-ошибка) завершает путь процесса с выбросом ошибки. Изображается кругом с толстой границей и символом молнии. Эта ошибка может быть перехвачена: граничным событием ошибки (Error Boundary Event) на родительском подпроцессе; событийным подпроцессом (Event Sub-process) со стартовым событием ошибки. Если ошибка не перехвачена — экземпляр процесса завершается с ошибкой. Используется для моделирования исключительных ситуаций, требующих обработки на уровне выше.',
  },
  {
    id: 'sa-bpmn-030',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Что такое Call Activity в BPMN?',
    options: [
      'Задача для телефонного звонка',
      'Элемент, вызывающий внешний, повторно используемый процесс или глобальную задачу',
      'Событие для получения входящего вызова',
      'Комментарий к активности',
    ],
    correctIndex: 1,
    explanation:
      'Call Activity — элемент BPMN, вызывающий внешний, отдельно определённый процесс (Reusable Sub-process) или глобальную задачу. Изображается прямоугольником с толстой границей. Отличие от Embedded Sub-process (встроенный подпроцесс): Call Activity ссылается на внешнее определение процесса, которое можно переиспользовать в нескольких местах; Embedded Sub-process определён внутри родительского процесса и виден только в нём. Call Activity — ключ к модульности и DRY-принципу в моделировании процессов.',
  },
  {
    id: 'sa-bpmn-031',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'quiz',
    question: 'Какой паттерн Workflow Patterns описывает ситуацию, когда множество параллельных веток должны синхронизироваться ровно один раз при первом достижении точки слияния?',
    options: [
      'Synchronization (AND-join)',
      'Structured Synchronizing Merge',
      'Multi-Merge',
      'Discriminator (N-out-of-M join)',
    ],
    correctIndex: 3,
    explanation:
      'Discriminator (N-out-of-M join) — workflow pattern, при котором точка слияния активируется при достижении первой из N параллельных веток (или K из N). Оставшиеся ветки «отбрасываются» без ожидания. В BPMN это моделируется через Complex Gateway или программную логику, так как стандартные шлюзы не поддерживают этот паттерн напрямую. Применение: «ожидаем первый положительный ответ из нескольких источников». Synchronization (AND-join) — ждёт ВСЕ ветки. Multi-Merge — пропускает каждую ветку без синхронизации.',
  },
  {
    id: 'sa-bpmn-032',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'quiz',
    question: 'Что такое эскалация (Escalation) в BPMN и чем она отличается от ошибки (Error)?',
    options: [
      'Эскалация и ошибка — синонимы',
      'Эскалация прерывает процесс, ошибка — нет',
      'Эскалация — сигнал для привлечения внимания вышестоящего уровня без прерывания процесса; ошибка — исключительная ситуация, прерывающая текущий путь',
      'Эскалация используется только в пулах, ошибка — только в дорожках',
    ],
    correctIndex: 2,
    explanation:
      'Escalation (эскалация) — механизм передачи информации на вышестоящий уровень иерархии процесса без обязательного прерывания. Изображается стрелкой вверх. Эскалация может быть: catching (граничное событие эскалации на подпроцессе) и throwing (конечное или промежуточное событие). Прерывающая (interrupting) эскалация останавливает подпроцесс; непрерывающая (non-interrupting) — создаёт параллельный поток, подпроцесс продолжает выполняться. Error всегда прерывает выполнение текущего пути и требует обработки. Эскалация — «SOS», ошибка — «CRASH».',
  },
  {
    id: 'sa-bpmn-033',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'open',
    question: 'Опишите паттерн Transaction Sub-process в BPMN. Как моделируются отмена и компенсация?',
    sampleAnswer:
      'Transaction Sub-process — специальный тип подпроцесса в BPMN для моделирования бизнес-транзакций, которые могут быть зафиксированы (committed) или отменены (cancelled). Изображается прямоугольником с двойной границей. Протокол транзакции: Successful completion — все участники транзакции успешно завершили работу; Cancellation — один из участников требует отмены; Hazard — сбой, не позволяющий ни завершить, ни корректно отменить. Обработка отмены: Cancel End Event внутри Transaction Sub-process инициирует отмену; Cancel Boundary Event на границе Transaction Sub-process ловит отмену и запускает обработчик. Компенсация: при отмене транзакции автоматически вызываются компенсационные действия для всех уже выполненных задач (в обратном порядке, LIFO). Компенсационные задачи связаны с основными через Compensation Boundary Event. Пример: бронирование путешествия — отель + авиабилет + машина. Если бронирование машины не удалось → Cancel → компенсация авиабилета и отеля.',
    explanation:
      'Transaction Sub-process реализует паттерн Saga на уровне BPMN. Критически важно для моделирования процессов с Long-running Transactions, где ACID-транзакции невозможны. В исполняемых моделях (Camunda) Transaction Sub-process может интегрироваться с протоколами WS-BusinessActivity или реализовывать собственную логику.',
  },
  {
    id: 'sa-bpmn-034',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'quiz',
    question: 'Какой тип Hit Policy в DMN Decision Table означает, что срабатывает первое правило, условие которого выполнено?',
    options: [
      'Unique (U)',
      'Any (A)',
      'First (F)',
      'Collect (C)',
    ],
    correctIndex: 2,
    explanation:
      'Hit Policy в DMN определяет, как обрабатываются ситуации, когда несколько правил срабатывают одновременно. First (F) — выполняется первое правило (по порядку в таблице), для которого условия истинны; остальные игнорируются. Unique (U) — предполагается, что только одно правило может сработать; ошибка если несколько. Any (A) — несколько правил могут сработать, но все должны давать одинаковый результат. Collect (C) — все сработавшие правила агрегируются (sum, count, min, max).',
  },
  {
    id: 'sa-bpmn-035',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'open',
    question: 'Как Process Mining помогает выявлять проблемы в бизнес-процессах? Какие метрики и паттерны анализируются?',
    sampleAnswer:
      'Process Mining анализирует event logs для выявления проблем: (1) Bottlenecks (узкие места): длительное время ожидания между активностями указывает на перегруженные ресурсы или неоптимальные handoff. Метрики: waiting time, queue length, resource utilization. (2) Rework (переделки): повторяющиеся активности, возвраты к предыдущим шагам. Метрика: rework rate, loop frequency. Причины: ошибки, неполная информация, отклонения. (3) Deviations (отклонения): conformance checking сравнивает реальные traces с эталонной моделью. Выявляются: пропущенные шаги, неположенные шаги, нарушения последовательности. (4) Variants (варианты): кластеризация путей выполнения. Большое количество вариантов указывает на нестандартизованный процесс. (5) SLA Breaches: процент экземпляров, превысивших целевое время. (6) Resource Performance: производительность исполнителей, распределение нагрузки. (7) Happy Path vs Exceptions: соотношение «счастливых» путей и исключений. Инструменты визуализации: animated process maps, heatmaps (цветом показывают частоту или время), dotted charts (временная шкала экземпляров).',
    explanation:
      'Process Mining делает проблемы процессов видимыми и измеримыми. Ключевое преимущество — объективность: данные из логов, а не субъективное восприятие стейкхолдеров. Аналитик использует Process Mining для валидации as-is модели, обоснования оптимизации и мониторинга эффекта изменений.',
  },
  {
    id: 'sa-bpmn-036',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Какой тип задачи в BPMN не требует программной автоматизации и выполняется человеком без системы?',
    options: [
      'Пользовательская задача (User Task)',
      'Сервисная задача (Service Task)',
      'Ручная задача (Manual Task)',
      'Скриптовая задача (Script Task)',
    ],
    correctIndex: 2,
    explanation:
      'Ручная задача (Manual Task) — работа, выполняемая человеком без помощи программного обеспечения. BPM-движок не может отслеживать её выполнение автоматически. Изображается прямоугольником с иконкой руки. Примеры: физическая доставка документа, личная встреча, телефонный звонок. User Task отличается тем, что человек взаимодействует с системой (заполняет форму, принимает решение в интерфейсе). В исполняемых моделях Manual Task обычно автоматически завершается или ожидает внешнего сигнала.',
  },
  {
    id: 'sa-bpmn-037',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Как в BPMN изображается конечное событие процесса?',
    options: [
      'Круг с тонкой границей',
      'Круг с двойной границей',
      'Круг с толстой границей',
      'Ромб',
    ],
    correctIndex: 2,
    explanation:
      'Конечное событие (End Event) изображается кругом с толстой одинарной границей. Оно обозначает завершение пути процесса. В процессе может быть несколько конечных событий (разные исходы: успех, отказ, отмена). Типы конечных событий различаются по содержимому: None (простое завершение), Message (отправка сообщения), Signal (отправка сигнала), Error (ошибка), Terminate (принудительное завершение всего экземпляра процесса, включая параллельные ветки). Стартовое событие — тонкая граница. Промежуточное — двойная граница.',
  },
  {
    id: 'sa-bpmn-038',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Какой элемент BPMN используется для соединения двух диаграмм одного процесса (когда модель не помещается на одной странице)?',
    options: [
      'Событие-сообщение',
      'Событие-ссылка (Link Event)',
      'Событие-сигнал',
      'Шлюз',
    ],
    correctIndex: 1,
    explanation:
      'Событие-ссылка (Link Event) — промежуточное событие, используемое для соединения частей процесса на разных страницах или в разных частях диаграммы. Работает как пара: Link Throw Event (исходящая ссылка, «goto») и Link Catch Event (входящая ссылка, «label»). Не представляет реального события в бизнес-смысле — это чисто графический инструмент для улучшения читаемости. Изображается двойным кругом со стрелкой внутри. Link Events должны быть в рамках одного пула.',
  },
  {
    id: 'sa-bpmn-039',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'open',
    question: 'Объясните разницу между прерывающими (interrupting) и непрерывающими (non-interrupting) граничными событиями в BPMN.',
    sampleAnswer:
      'Прерывающее (interrupting) граничное событие — при срабатывании прекращает выполнение задачи/подпроцесса, к которому прикреплено. Изображается кругом со сплошной границей. Управление переходит по исходящему потоку из события. Пример: таймер-прерыватель «если задача не завершена за 24 часа — отменить и эскалировать». Непрерывающее (non-interrupting) граничное событие — при срабатывании создаёт параллельный поток, но основная задача/подпроцесс продолжает выполняться. Изображается кругом с пунктирной границей. Пример: таймер-напоминание «каждые 4 часа отправлять reminder, пока задача не завершена» — задача продолжает ждать исполнителя. Применение: прерывающие — для timeout с отменой, критических ошибок; непрерывающие — для напоминаний, эскалации без отмены, параллельной обработки исключений.',
    explanation:
      'Выбор между interrupting и non-interrupting зависит от бизнес-логики: нужно ли остановить основную работу или создать параллельный поток. Непрерывающие события — мощный инструмент для моделирования SLA-мониторинга, напоминаний и эскалации без нарушения основного потока.',
  },
  {
    id: 'sa-bpmn-040',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'quiz',
    question: 'Что такое Terminate End Event и как он влияет на выполнение процесса?',
    options: [
      'Завершает только текущий путь процесса',
      'Немедленно прекращает весь экземпляр процесса, включая все параллельные ветки',
      'Отправляет сигнал завершения другим процессам',
      'Запускает компенсацию всех выполненных задач',
    ],
    correctIndex: 1,
    explanation:
      'Terminate End Event — специальный тип конечного события, который немедленно прекращает весь экземпляр процесса, включая все активные параллельные ветки и подпроцессы. Изображается толстым кругом с закрашенным кругом внутри. Обычный End Event завершает только текущий путь; если есть параллельные ветки — они продолжают выполняться до своего завершения. Terminate End Event — «аварийная кнопка», используется когда при определённом исходе весь процесс должен немедленно остановиться. Использовать осторожно — может привести к неконсистентным состояниям.',
  },
  {
    id: 'sa-bpmn-041',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'quiz',
    question: 'Какой паттерн используется для моделирования обработки однотипных элементов из коллекции параллельно или последовательно?',
    options: [
      'Embedded Sub-process',
      'Multi-Instance Activity',
      'Event Sub-process',
      'Ad-Hoc Sub-process',
    ],
    correctIndex: 1,
    explanation:
      'Multi-Instance Activity (многоэкземплярная активность) — задача или подпроцесс, выполняющийся несколько раз, по одному разу для каждого элемента входной коллекции. Маркеры: три вертикальные линии — параллельное выполнение (все экземпляры одновременно); три горизонтальные линии — последовательное выполнение (один за другим). Атрибуты: loopCardinality (количество итераций), inputDataItem (элемент коллекции), completionCondition (условие досрочного завершения). Пример: отправка уведомлений всем участникам заказа, проверка каждой позиции заказа.',
  },
  {
    id: 'sa-bpmn-042',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Какой элемент BPMN используется для группировки элементов диаграммы без влияния на поток выполнения?',
    options: [
      'Подпроцесс (Sub-process)',
      'Пул (Pool)',
      'Группа (Group)',
      'Дорожка (Lane)',
    ],
    correctIndex: 2,
    explanation:
      'Группа (Group) — графический элемент для визуальной группировки элементов диаграммы. Изображается пунктирным прямоугольником с закруглёнными углами. Группа НЕ влияет на поток выполнения, не определяет scope для переменных, не является контейнером для событий. Используется для: визуального выделения связанных элементов, добавления комментариев к части диаграммы, указания зоны ответственности (альтернатива Lane), обозначения фазы процесса. Подпроцесс — реальный контейнер с собственным scope.',
  },
  {
    id: 'sa-bpmn-043',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Какой BPM-движок является одним из наиболее популярных open-source решений для исполнения BPMN-моделей?',
    options: [
      'Microsoft Visio',
      'Camunda',
      'Lucidchart',
      'PowerPoint',
    ],
    correctIndex: 1,
    explanation:
      'Camunda — популярный open-source BPM-движок и платформа автоматизации процессов. Поддерживает BPMN 2.0 для оркестрации, DMN для бизнес-правил, CQRS-паттерн через Camunda Zeebe. Особенности: Camunda Modeler (инструмент моделирования), REST API, поддержка Java/Spring, External Task pattern для микросервисов. Альтернативы: Flowable, Activiti, jBPM (open-source), Bizagi, Pega, Appian (коммерческие). Microsoft Visio и Lucidchart — инструменты моделирования (рисования), а не исполнения процессов.',
  },
  {
    id: 'sa-bpmn-044',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Что такое Ad-Hoc Sub-process в BPMN?',
    options: [
      'Подпроцесс, выполняющийся по расписанию',
      'Подпроцесс, содержащий набор задач, порядок выполнения которых определяется исполнителем в runtime',
      'Подпроцесс, вызываемый из другого процесса',
      'Подпроцесс для обработки ошибок',
    ],
    correctIndex: 1,
    explanation:
      'Ad-Hoc Sub-process — специальный тип подпроцесса, содержащий набор задач без строго определённого порядка выполнения. Исполнитель сам решает, какие задачи выполнять и в каком порядке. Изображается прямоугольником с символом тильды (~) внизу. Применение: процессы с высокой вариативностью, творческая работа, case management. Ad-Hoc Sub-process дополняет стандартные последовательные потоки BPMN, поддерживая гибкие, knowledge-worker-oriented процессы.',
  },
  {
    id: 'sa-bpmn-045',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'open',
    question: 'Какие KPI (Key Performance Indicators) обычно используются для оценки эффективности бизнес-процессов? Как они измеряются?',
    sampleAnswer:
      'Ключевые KPI бизнес-процессов: (1) Cycle Time (время цикла) — общее время от начала до завершения экземпляра процесса. Измерение: timestamp конечного события - timestamp стартового события. Target: сокращение. (2) Processing Time (время обработки) — суммарное время активной работы, без ожиданий. Измерение: сумма длительностей задач. (3) Wait Time (время ожидания) — время простоя между задачами. Измерение: Cycle Time - Processing Time. (4) Throughput (пропускная способность) — количество завершённых экземпляров за период. Target: увеличение. (5) First-Time-Right Rate — процент экземпляров, прошедших без rework и ошибок. (6) Cost per Instance — стоимость выполнения одного экземпляра (ресурсы, время, материалы). (7) SLA Compliance — процент экземпляров, завершённых в рамках целевого времени. (8) Queue Length — количество экземпляров, ожидающих обработки в определённой точке. (9) Resource Utilization — загруженность ресурсов (людей, систем). (10) Exception Rate — доля экземпляров с отклонениями от happy path. Источники данных: event logs из BPM-движка, Process Mining tools, APM systems. Визуализация: dashboards в BPM-платформе, BI-инструменты.',
    explanation:
      'KPI процессов должны быть привязаны к бизнес-целям (BSC, OKR). Cycle Time важен для клиентоориентированных процессов; Cost — для операционной эффективности; First-Time-Right — для качества. Аналитик помогает определить целевые значения KPI и механизмы их измерения при проектировании процесса.',
  },
  {
    id: 'sa-bpmn-046',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Что такое happy path (счастливый путь) в контексте моделирования процессов?',
    options: [
      'Путь с максимальным количеством шагов',
      'Основной, наиболее типичный путь выполнения процесса без ошибок и исключений',
      'Путь, требующий наименьших затрат',
      'Путь для VIP-клиентов',
    ],
    correctIndex: 1,
    explanation:
      'Happy Path (счастливый путь) — основной, наиболее типичный сценарий выполнения процесса, когда всё идёт по плану: нет ошибок, отказов, исключительных ситуаций, возвратов. При моделировании рекомендуется сначала описать happy path, затем добавлять альтернативные потоки и обработку исключений. Happy path обычно идёт по центру диаграммы слева направо. Ошибка начинающих — моделировать только happy path, игнорируя exceptions, что приводит к неполной модели.',
  },
  {
    id: 'sa-bpmn-047',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Какой стандарт OMG дополняет BPMN для моделирования кейсов (case management)?',
    options: [
      'DMN',
      'CMMN (Case Management Model and Notation)',
      'BMM',
      'SBVR',
    ],
    correctIndex: 1,
    explanation:
      'CMMN (Case Management Model and Notation) — стандарт OMG для моделирования knowledge-intensive, непредсказуемых процессов, где порядок действий не может быть заранее определён. Отличие от BPMN: BPMN — для предсказуемых, повторяемых процессов; CMMN — для cases, где knowledge worker принимает решения ad-hoc. Ключевые элементы CMMN: Case, Stage, Task (Human, Process, Case), Milestone, Sentry (условия), PlanItem. CMMN и BPMN можно комбинировать: case содержит BPMN-процессы как Plan Items. DMN — бизнес-решения. BMM — бизнес-мотивация.',
  },
  {
    id: 'sa-bpmn-048',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'quiz',
    question: 'Какой паттерн используется для передачи работы от одного исполнителя другому (например, при смене смены или отсутствии)?',
    options: [
      'Delegation',
      'Deferred Choice',
      'Interleaved Parallel Routing',
      'Milestone',
    ],
    correctIndex: 0,
    explanation:
      'Delegation (делегирование) — передача ответственности за задачу от одного исполнителя другому. В BPMN напрямую не моделируется как отдельный элемент — реализуется через: reassignment в BPM-движке; явное моделирование через сообщение или сигнал к другому участнику; организационные правила в workflow engine. Deferred Choice — отложенный выбор между альтернативами на основе внешнего события. Interleaved Parallel Routing — чередование параллельных активностей. Milestone — контрольная точка достижения.',
  },
  {
    id: 'sa-bpmn-049',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'open',
    question: 'Как интегрировать BPMN-процессы с микросервисной архитектурой? Какие паттерны и подходы используются?',
    sampleAnswer:
      'Интеграция BPMN с микросервисами: (1) External Task Pattern (Camunda): BPM-движок создаёт задачу, микросервисы опрашивают очередь задач, выполняют работу и сообщают результат. Loose coupling, масштабируемость, отказоустойчивость. (2) Service Task с REST/gRPC: BPM-движок синхронно вызывает API микросервиса. Проще, но создаёт coupling и блокирует процесс. (3) Message Events: BPM-движок публикует/подписывается на события через Kafka/RabbitMQ. Асинхронное взаимодействие, event-driven. (4) Orchestration Saga: BPMN-процесс выступает как Saga Orchestrator, управляя последовательностью вызовов микросервисов и компенсациями. (5) Choreography: каждый микросервис реагирует на события; BPM-движок может использоваться для мониторинга (Process Mining над event log) или как один из участников. Выбор подхода: External Task — предпочтителен для Camunda, обеспечивает loose coupling; Message Events — для event-driven архитектуры; Sync Service Call — для простых, быстрых операций. Важно: BPM-движок не должен становиться монолитным оркестратором; использовать bounded contexts, держать процессы небольшими.',
    explanation:
      'Ключевой вопрос: BPM как оркестратор или как один из участников choreography? Orchestration проще для сложных процессов с human tasks; choreography масштабируется лучше. На практике — гибридный подход: BPMN для human-centric процессов, choreography для high-throughput автоматизации.',
  },
  {
    id: 'sa-bpmn-050',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Что такое Receive Task в BPMN?',
    options: [
      'Задача для получения товара от поставщика',
      'Задача, ожидающая получения сообщения от внешнего участника для продолжения процесса',
      'Задача для архивирования данных',
      'Задача автоматической валидации',
    ],
    correctIndex: 1,
    explanation:
      'Receive Task — задача, которая ожидает получения сообщения (Message) от внешнего участника для продолжения выполнения процесса. Изображается прямоугольником с иконкой конверта. Функционально аналогична промежуточному событию-получателю сообщения (Message Catch Event), но представлена как задача. Применение: ожидание ответа от партнёра, ожидание подтверждения оплаты от платёжной системы. Send Task — противоположность, отправляет сообщение.',
  },
];
