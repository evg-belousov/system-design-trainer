import type { QuizQuestion, OpenQuestion } from '../types';

export const questions: (QuizQuestion | OpenQuestion)[] = [
  {
    id: 'sa-bpmn-001',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Какой элемент BPMN 2.0 изображается в виде круга и обозначает начало процесса?',
    options: [
      'Действие (Activity)',
      'Шлюз (Gateway)',
      'Стартовое событие (Start Event)',
      'Поток управления (Sequence Flow)',
    ],
    correctIndex: 2,
    explanation:
      'Стартовое событие (Start Event) изображается в виде круга с тонкой одинарной границей и обозначает точку начала процесса. В каждом пуле должно быть хотя бы одно стартовое событие. Стартовые события могут быть различных типов: простое (None — процесс запускается вручную или произвольно), по сообщению (Message — процесс запускается при получении сообщения), по таймеру (Timer — процесс запускается в определённое время или с определённой периодичностью), условное (Conditional — процесс запускается при выполнении условия), сигнальное (Signal — процесс запускается при получении широковещательного сигнала).',
  },
  {
    id: 'sa-bpmn-002',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Что такое пул (Pool) в нотации BPMN?',
    options: [
      'Контейнер для группировки связанных задач',
      'Контейнер, представляющий участника процесса (организацию или систему)',
      'Графический элемент для обозначения хранилища данных',
      'Тип подпроцесса для параллельного выполнения',
    ],
    correctIndex: 1,
    explanation:
      'Пул (Pool) в BPMN представляет участника процесса — организацию, подразделение или систему. Пул является контейнером для процесса одного участника. Внутри пула можно создавать дорожки (Lanes) для разделения ответственности между ролями или отделами. Между пулами передаются сообщения через потоки сообщений (Message Flow), изображаемые пунктирными стрелками. Потоки управления (Sequence Flow) не могут пересекать границы пулов — это ключевое правило BPMN, обеспечивающее чёткое разделение ответственности между участниками.',
  },
  {
    id: 'sa-bpmn-003',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Какой тип шлюза BPMN обозначается ромбом с крестиком «X» внутри?',
    options: [
      'Параллельный шлюз (AND Gateway)',
      'Инклюзивный шлюз (OR Gateway)',
      'Эксклюзивный шлюз (XOR Gateway)',
      'Событийный шлюз (Event-based Gateway)',
    ],
    correctIndex: 2,
    explanation:
      'Эксклюзивный шлюз (XOR Gateway, Exclusive Gateway) обозначается ромбом с крестиком «X» внутри (или пустым ромбом). При разветвлении выбирается ровно один из исходящих потоков на основе условий. При слиянии шлюз пропускает первый пришедший токен без ожидания остальных. Параллельный шлюз (AND) обозначается знаком «+» и активирует все потоки. Инклюзивный шлюз (OR) обозначается кругом внутри ромба и активирует один или несколько потоков. Событийный шлюз обозначается пятиугольником внутри ромба и ожидает наступления одного из нескольких событий.',
  },
  {
    id: 'sa-bpmn-004',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Чем отличается поток управления (Sequence Flow) от потока сообщений (Message Flow) в BPMN?',
    options: [
      'Sequence Flow изображается пунктирной линией, а Message Flow — сплошной',
      'Sequence Flow соединяет элементы внутри одного пула, а Message Flow — элементы в разных пулах',
      'Message Flow может использоваться только между стартовым и конечным событиями',
      'Sequence Flow используется только в подпроцессах',
    ],
    correctIndex: 1,
    explanation:
      'Поток управления (Sequence Flow) — сплошная стрелка, соединяющая элементы внутри одного пула и определяющая порядок выполнения. Поток сообщений (Message Flow) — пунктирная стрелка с открытым наконечником, соединяющая элементы в разных пулах и обозначающая обмен сообщениями между участниками. Это фундаментальное правило BPMN: Sequence Flow никогда не пересекает границы пулов, а Message Flow никогда не используется внутри одного пула. Нарушение этих правил — одна из самых частых ошибок начинающих аналитиков при моделировании процессов.',
  },
  {
    id: 'sa-bpmn-005',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'quiz',
    question: 'Какой элемент BPMN используется для обозначения работы, выполняемой человеком?',
    options: [
      'Сервисная задача (Service Task)',
      'Пользовательская задача (User Task)',
      'Скриптовая задача (Script Task)',
      'Задача отправки (Send Task)',
    ],
    correctIndex: 1,
    explanation:
      'Пользовательская задача (User Task) обозначает работу, выполняемую человеком с помощью программного обеспечения (например, заполнение формы). Изображается прямоугольником с закруглёнными углами и иконкой человека. Сервисная задача (Service Task) выполняется автоматически системой или веб-сервисом. Скриптовая задача (Script Task) выполняет скрипт на языке программирования. Задача отправки (Send Task) отправляет сообщение внешнему участнику. Правильный выбор типа задачи важен при исполняемом моделировании в BPM-движках (Camunda, Activiti).',
  },
  {
    id: 'sa-bpmn-006',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'junior',
    type: 'open',
    question: 'Объясните разницу между моделями процессов «as-is» и «to-be». Зачем нужна каждая из них?',
    sampleAnswer:
      'Модель «as-is» описывает текущее состояние бизнес-процесса — как он выполняется сейчас, со всеми существующими шагами, ролями, системами и проблемами. Она создаётся путём анализа реальной работы: интервью, наблюдение, анализ документов. Модель «to-be» описывает целевое состояние процесса — как он должен выполняться после оптимизации или автоматизации. Модель as-is нужна для: понимания текущей ситуации, выявления узких мест (bottleneck), дублирования работ, ручных этапов, которые можно автоматизировать, и для определения baseline для измерения улучшений. Модель to-be нужна для: визуализации целевого состояния, согласования изменений со стейкхолдерами, оценки эффекта от изменений, формирования требований к новой системе. Типичные ошибки: пропуск as-is-анализа (оптимизация «вслепую»), моделирование «идеализированного» as-is вместо реального, отсутствие метрик для сравнения as-is и to-be.',
    explanation:
      'Анализ as-is / to-be — фундаментальная методика бизнес-анализа. Gap Analysis между моделями выявляет конкретные изменения, которые необходимо реализовать. Метрики процесса (время цикла, стоимость, количество ошибок) позволяют количественно оценить эффект оптимизации. В практике BPM это называется «Process Improvement Life Cycle».',
  },
  {
    id: 'sa-bpmn-007',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Какой тип подпроцесса в BPMN 2.0 запускает свои экземпляры для каждого элемента коллекции?',
    options: [
      'Встроенный подпроцесс (Embedded Sub-process)',
      'Вызываемый подпроцесс (Call Activity)',
      'Многоэкземплярный подпроцесс (Multi-instance Sub-process)',
      'Событийный подпроцесс (Event Sub-process)',
    ],
    correctIndex: 2,
    explanation:
      'Многоэкземплярный подпроцесс (Multi-instance Sub-process) создаёт отдельный экземпляр для каждого элемента входной коллекции. Обозначается тремя вертикальными линиями (параллельное выполнение) или тремя горизонтальными линиями (последовательное выполнение) внизу прямоугольника. Пример: обработка каждой позиции заказа, отправка уведомления каждому участнику. Встроенный подпроцесс — часть родительского процесса с собственным scope. Вызываемый подпроцесс (Call Activity) — повторно используемый процесс, определённый отдельно. Событийный подпроцесс запускается при возникновении события внутри родительского процесса.',
  },
  {
    id: 'sa-bpmn-008',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Как в BPMN моделируется обработка ошибки, возникающей в подпроцессе?',
    options: [
      'С помощью условного потока управления (Conditional Sequence Flow)',
      'С помощью промежуточного граничного события ошибки (Error Boundary Event) на подпроцессе',
      'С помощью эксклюзивного шлюза после подпроцесса',
      'С помощью аннотации (Text Annotation)',
    ],
    correctIndex: 1,
    explanation:
      'Промежуточное граничное событие ошибки (Error Boundary Event) прикрепляется к границе задачи или подпроцесса и «перехватывает» ошибку, если она возникает. Изображается кругом с двойной границей и символом молнии, расположенным на рамке задачи. При возникновении ошибки выполнение основного потока прерывается, и управление переходит по исходящему потоку из граничного события в обработчик ошибки. Существуют прерывающие (interrupting) и непрерывающие (non-interrupting) граничные события. Прерывающее событие ошибки останавливает задачу, непрерывающее — создаёт параллельный поток без остановки основного.',
  },
  {
    id: 'sa-bpmn-009',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Что такое событийный подпроцесс (Event Sub-process) в BPMN и когда он активируется?',
    options: [
      'Подпроцесс, который выполняется параллельно с основным процессом по умолчанию',
      'Подпроцесс, который запускается при наступлении определённого события (таймер, сообщение, ошибка) внутри родительского процесса',
      'Подпроцесс, который вызывается явно через Call Activity',
      'Подпроцесс, который выполняется только один раз за время жизни процесса',
    ],
    correctIndex: 1,
    explanation:
      'Событийный подпроцесс (Event Sub-process) — это подпроцесс, размещённый внутри родительского процесса или подпроцесса, который не имеет входящих и исходящих потоков управления. Он запускается только при наступлении определённого события (стартовое событие подпроцесса). Обозначается прямоугольником с пунктирной границей. Может быть прерывающим (прекращает выполнение родительского процесса) или непрерывающим (работает параллельно). Типичные сценарии: обработка ошибок на уровне всего процесса, обработка таймаута, реакция на отмену (cancellation), эскалация.',
  },
  {
    id: 'sa-bpmn-010',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Какой тип промежуточного события в BPMN используется для приостановки выполнения процесса на заданное время?',
    options: [
      'Промежуточное событие сообщения (Message Intermediate Event)',
      'Промежуточное событие таймера (Timer Intermediate Event)',
      'Промежуточное событие ссылки (Link Intermediate Event)',
      'Промежуточное условное событие (Conditional Intermediate Event)',
    ],
    correctIndex: 1,
    explanation:
      'Промежуточное событие таймера (Timer Intermediate Event) приостанавливает выполнение процесса до наступления заданного момента времени, истечения интервала или определённой периодичности. Изображается двойным кругом с символом часов. Используется для моделирования задержек, ожиданий и дедлайнов. Пример: «Подождать 3 рабочих дня после отправки запроса». Таймер может быть определён через: конкретную дату (timeDate), длительность (timeDuration) или периодичность (timeCycle) в формате ISO 8601. Событие сообщения ожидает сообщение от другого участника, условное — наступления условия.',
  },
  {
    id: 'sa-bpmn-011',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'open',
    question: 'Объясните разницу между инклюзивным (OR) и эксклюзивным (XOR) шлюзами при разветвлении и слиянии потоков. Приведите примеры из реальных бизнес-процессов.',
    sampleAnswer:
      'Эксклюзивный шлюз (XOR) при разветвлении выбирает ровно один исходящий поток — тот, условие которого истинно. При слиянии пропускает первый пришедший токен. Пример: «Сумма заказа > 100 000 руб.?» — Да: на согласование директору, Нет: автоматическое одобрение. Инклюзивный шлюз (OR) при разветвлении активирует один или несколько исходящих потоков — все, условия которых истинны. При слиянии ожидает завершения всех активированных ветвей (именно активированных, а не всех входящих). Пример: при оформлении кредита могут параллельно запускаться проверки: проверка кредитной истории (всегда), проверка залога (если сумма > 1 млн), выезд оценщика (если залог — недвижимость). Количество активных веток зависит от параметров заявки. Ключевое отличие при слиянии: XOR пропускает первый пришедший токен; OR ожидает все активированные ветви, что требует от движка отслеживания, какие ветви были активированы. Это делает OR-шлюз более сложным для исполнения.',
    explanation:
      'Инклюзивный шлюз — один из наиболее сложных элементов BPMN для корректного моделирования и исполнения. При слиянии он должен «знать», какие ветви были активированы при разветвлении, чтобы ожидать именно их. Ошибки в использовании OR-шлюза — частая причина зависших процессов в BPM-движках. Рекомендация: использовать OR-шлюз только когда это действительно необходимо, и всегда проверять корректность модели через симуляцию.',
  },
  {
    id: 'sa-bpmn-012',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'open',
    question: 'Что такое компенсация (Compensation) в BPMN? В каких сценариях она применяется и как моделируется?',
    sampleAnswer:
      'Компенсация в BPMN — механизм отмены или «отката» уже выполненной работы в случае, когда дальнейшее выполнение процесса невозможно или нежелательно. В отличие от обработки ошибок, компенсация применяется к уже успешно завершённым задачам. Моделирование: (1) На задачу, которая может быть компенсирована, прикрепляется граничное компенсационное событие (Compensation Boundary Event — кружок с символом «перемотки»). (2) От этого события идёт ассоциация (не Sequence Flow!) к компенсационной задаче, описывающей действия отката. (3) Запуск компенсации производится промежуточным компенсационным событием (Compensation Throw Event) или из обработчика ошибки. Пример: процесс бронирования путешествия — бронирование авиабилета (компенсация: отмена бронирования), бронирование отеля (компенсация: отмена брони). Если бронирование отеля не удалось, запускается компенсация для уже забронированного авиабилета. Это реализация паттерна Saga в бизнес-процессах.',
    explanation:
      'Компенсация в BPMN реализует паттерн, аналогичный Saga в микросервисах. Ключевые правила: компенсационная задача соединяется с граничным событием через ассоциацию, а не через Sequence Flow; компенсация выполняется в обратном порядке (LIFO); компенсационная задача должна быть идемпотентной. Этот механизм критически важен для моделирования длительных транзакций (Long-running Transactions), где ACID-транзакции невозможны.',
  },
  {
    id: 'sa-bpmn-013',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'quiz',
    question: 'Какой элемент BPMN используется для моделирования бизнес-правила, выполняемого автоматически?',
    options: [
      'Пользовательская задача (User Task)',
      'Задача бизнес-правила (Business Rule Task)',
      'Ручная задача (Manual Task)',
      'Задача получения (Receive Task)',
    ],
    correctIndex: 1,
    explanation:
      'Задача бизнес-правила (Business Rule Task) обозначает автоматическое выполнение бизнес-правила через механизм правил (rule engine), например DMN (Decision Model and Notation). Изображается прямоугольником с иконкой таблицы. Это позволяет вынести бизнес-логику из кода процесса в отдельную таблицу решений, которую могут поддерживать бизнес-пользователи без участия разработчиков. Пример: определение категории риска клиента на основе набора параметров. Пользовательская задача требует участия человека. Ручная задача выполняется человеком без системы. Задача получения ожидает входящее сообщение.',
  },
  {
    id: 'sa-bpmn-014',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'quiz',
    question: 'Чем сигнальное событие (Signal Event) отличается от события сообщения (Message Event) в BPMN?',
    options: [
      'Сигнал адресован конкретному получателю, а сообщение — всем подписчикам',
      'Сигнал является широковещательным (broadcast) и принимается всеми подписчиками, а сообщение адресовано конкретному получателю',
      'Сигнал может использоваться только как стартовое событие, а сообщение — как промежуточное',
      'Между ними нет разницы, это синонимы',
    ],
    correctIndex: 1,
    explanation:
      'Сигнальное событие (Signal Event) работает по принципу широковещания (broadcast): когда сигнал отправляется, его получают ВСЕ процессы и элементы, подписанные на этот сигнал. Это аналог паттерна Publish-Subscribe. Событие сообщения (Message Event) — адресное: сообщение отправляется конкретному получателю (определённому пулу или экземпляру процесса). Это аналог паттерна Point-to-Point. Сигналы используются для координации между несвязанными процессами: например, сигнал «Курс валюты изменился» может запустить пересчёт во множестве процессов одновременно. Сообщение используется для конкретного обмена данными между участниками.',
  },
  {
    id: 'sa-bpmn-015',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'quiz',
    question: 'Какой паттерн BPMN используется для моделирования ситуации, когда процесс должен отреагировать на первое из нескольких возможных событий?',
    options: [
      'Параллельный шлюз (AND Gateway) с граничными событиями',
      'Инклюзивный шлюз (OR Gateway) с условными потоками',
      'Событийный шлюз (Event-based Gateway) с последующими промежуточными событиями',
      'Эксклюзивный шлюз (XOR Gateway) с дефолтным потоком',
    ],
    correctIndex: 2,
    explanation:
      'Событийный шлюз (Event-based Gateway) используется, когда процесс должен дождаться одного из нескольких возможных событий и отреагировать на первое наступившее. После шлюза размещаются промежуточные события-получатели (catching events): таймеры, сообщения, сигналы, условия. Срабатывает только одна ветвь — та, чьё событие произошло первым. Остальные отменяются. Пример: после отправки коммерческого предложения ожидаем либо ответ клиента (сообщение), либо истечение 7 дней (таймер). Что произойдёт первым — по той ветви и пойдёт процесс. Это принципиально отличается от XOR, где выбор основан на данных, а не на внешних событиях.',
  },
  {
    id: 'sa-bpmn-016',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'open',
    question: 'Опишите, как вы бы смоделировали в BPMN процесс оформления заказа с оркестрацией трёх сервисов (склад, оплата, доставка), включая обработку ошибок и компенсацию.',
    sampleAnswer:
      'Процесс оформления заказа с оркестрацией: Основной пул «Оркестратор заказов» содержит следующую логику: (1) Стартовое событие (сообщение) — получение заказа. (2) Сервисная задача «Резервирование товара на складе» — вызов Warehouse API. Граничное событие ошибки: если товара нет — конечное событие с сообщением клиенту об отказе. Компенсационное событие: отмена резервирования. (3) Сервисная задача «Проведение оплаты» — вызов Payment API. Граничное событие ошибки: если оплата не прошла — запуск компенсации резервирования на складе, затем уведомление клиента. Компенсационное событие: возврат средств. (4) Сервисная задача «Создание доставки» — вызов Delivery API. Граничное событие ошибки: если доставка невозможна — запуск компенсации (возврат оплаты + отмена резервирования), уведомление клиента. (5) Задача отправки «Уведомление клиента об успехе». (6) Конечное событие. На весь подпроцесс накладывается граничное событие таймера (например, 30 минут на весь процесс). При срабатывании — компенсация всех выполненных шагов. Три внешних пула (Warehouse, Payment, Delivery) с потоками сообщений от/к оркестратору. Это реализация паттерна Orchestration Saga.',
    explanation:
      'Данный сценарий демонстрирует паттерн Orchestration Saga в BPMN, где центральный оркестратор управляет последовательностью вызовов и компенсаций. Альтернатива — Choreography (без центрального координатора), моделируемая через Choreography Diagram в BPMN. Ключевые элементы модели: граничные события ошибок для каждого шага, компенсационные задачи для отката, таймаут на весь процесс, потоки сообщений к внешним сервисам.',
  },
  {
    id: 'sa-bpmn-017',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'open',
    question: 'Какие метрики процесса вы бы использовали для обоснования оптимизации бизнес-процесса? Как BPMN-модель помогает в измерении этих метрик?',
    sampleAnswer:
      'Ключевые метрики для обоснования оптимизации: (1) Cycle Time (время цикла) — общее время от начала до завершения процесса, включая ожидания. Измеряется по timestamps стартового и конечного событий в BPM-движке. (2) Processing Time (время обработки) — суммарное время активной работы, без ожиданий. Разница между Cycle Time и Processing Time показывает потенциал оптимизации. (3) Throughput (пропускная способность) — количество завершённых экземпляров за период. (4) Error Rate (доля ошибок) — процент экземпляров, завершившихся ошибкой или ушедших в компенсацию. (5) Wait Time (время ожидания) — время простоя между задачами, особенно на пользовательских задачах. (6) Cost per Instance (стоимость экземпляра) — суммарная стоимость ресурсов на один экземпляр. (7) First-Time-Right Rate — доля экземпляров, прошедших без возвратов и переделок. BPMN-модель помогает: в BPM-движках (Camunda, Activiti) каждый элемент логирует timestamps, что позволяет автоматически собирать метрики; модель визуализирует узкие места через heatmaps; симуляция BPMN-модели позволяет оценить эффект оптимизации до внедрения.',
    explanation:
      'Process Mining и BPMN-симуляция — современные подходы к анализу процессов. Process Mining автоматически строит модель процесса из логов системы (event logs), выявляя реальные пути выполнения, узкие места и отклонения от эталонной модели. BPMN-симуляция позволяет моделировать нагрузку и оценивать эффект оптимизации до её реализации. Зрелый аналитик должен уметь обосновать оптимизацию количественно через метрики.',
  },
  {
    id: 'sa-bpmn-018',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'quiz',
    question: 'Какой механизм BPMN 2.0 позволяет моделировать эскалацию задачи при нарушении SLA?',
    options: [
      'Компенсационное событие на границе задачи',
      'Непрерывающее граничное событие таймера (Non-interrupting Timer Boundary Event)',
      'Событие завершения с ошибкой (Error End Event)',
      'Параллельный шлюз после задачи',
    ],
    correctIndex: 1,
    explanation:
      'Непрерывающее граничное событие таймера (Non-interrupting Timer Boundary Event) — идеальный механизм для моделирования эскалации при нарушении SLA. Оно обозначается пунктирным кругом с символом часов на границе задачи. При срабатывании таймера (например, задача не завершена за 4 часа) создаётся параллельный поток для эскалации (уведомление руководителя, переназначение), но основная задача продолжает выполняться. Прерывающее событие (сплошная граница) отменило бы задачу, что нежелательно — мы хотим, чтобы исполнитель мог завершить работу. Компенсационное событие используется для отката завершённых задач, а не для эскалации.',
  },
  {
    id: 'sa-bpmn-019',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'senior',
    type: 'quiz',
    question: 'В чём ключевое отличие Choreography Diagram от Collaboration Diagram в BPMN 2.0?',
    options: [
      'Choreography Diagram показывает только потоки данных, а Collaboration — потоки управления',
      'Choreography Diagram описывает взаимодействие между участниками без внутренних процессов каждого участника, а Collaboration Diagram показывает внутренние процессы в пулах',
      'Collaboration Diagram не поддерживает потоки сообщений',
      'Choreography Diagram используется только для UI-процессов',
    ],
    correctIndex: 1,
    explanation:
      'Choreography Diagram (диаграмма хореографии) фокусируется на взаимодействии между участниками: показывает последовательность обменов сообщениями без раскрытия внутренних процессов каждого участника. Элементы хореографии — Choreography Tasks, в которых указаны инициатор и получатель. Collaboration Diagram (диаграмма сотрудничества) показывает внутренние процессы участников внутри пулов, связанные потоками сообщений. Choreography Diagram отвечает на вопрос «в каком порядке участники обмениваются сообщениями», а Collaboration Diagram — «как каждый участник организует свою работу внутри». В микросервисной архитектуре Choreography соответствует паттерну Choreography Saga, а Collaboration — Orchestration Saga.',
  },
  {
    id: 'sa-bpmn-020',
    block: 'sa',
    topic: 'bpmn',
    topicLabel: 'BPMN и бизнес-процессы',
    difficulty: 'middle',
    type: 'open',
    question: 'Перечислите и объясните основные ошибки, которые допускают аналитики при моделировании бизнес-процессов в BPMN.',
    sampleAnswer:
      'Основные ошибки при моделировании в BPMN: (1) Sequence Flow между пулами — потоки управления не могут пересекать границы пулов, между пулами используются только Message Flow. (2) Отсутствие конечного события — каждый путь процесса должен завершаться конечным событием. (3) Несбалансированные шлюзы — каждый шлюз разветвления должен иметь парный шлюз слияния того же типа (XOR→XOR, AND→AND). Несбалансированность приводит к зависшим токенам. (4) Использование OR-шлюза без необходимости — OR при слиянии сложен для исполнения, часто можно заменить на комбинацию AND и XOR. (5) «Спагетти-процесс» — слишком много элементов на одной диаграмме. Решение: декомпозиция на подпроцессы, иерархическое моделирование. (6) Смешение уровней абстракции — на одной диаграмме показаны и стратегические шаги, и технические детали. (7) Отсутствие обработки ошибок и исключений — моделируется только «happy path». (8) Неправильное использование типов задач — например, использование Abstract Task вместо User Task или Service Task. (9) Message Flow внутри одного пула — Message Flow используется только между пулами. (10) Множественные стартовые события без чёткого описания условий запуска.',
    explanation:
      'Качественная BPMN-модель должна быть синтаксически корректной (соответствовать спецификации BPMN 2.0), семантически верной (отражать реальный процесс) и прагматически полезной (понятной целевой аудитории). Инструменты валидации (Camunda Modeler, Signavio) помогают обнаружить синтаксические ошибки, но семантические и прагматические ошибки выявляются только при ревью с экспертами домена.',
  },
];
